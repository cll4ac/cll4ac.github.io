<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>redis/Redis学习笔记（一） | Sky</title><meta name="description" content="redis/Redis学习笔记（一）"><meta name="author" content="cll4ac"><meta name="copyright" content="cll4ac"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="redis/Redis学习笔记（一）"><meta name="twitter:description" content="redis/Redis学习笔记（一）"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta property="og:type" content="article"><meta property="og:title" content="redis/Redis学习笔记（一）"><meta property="og:url" content="http://yoursite.com/2020/08/04/redis/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/"><meta property="og:site_name" content="Sky"><meta property="og:description" content="redis/Redis学习笔记（一）"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://yoursite.com/2020/08/04/redis/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/"><link rel="prev" title="redis/Redis学习笔记（二）" href="http://yoursite.com/2020/08/04/redis/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/"><link rel="next" title="Web笔记_css基础" href="http://yoursite.com/2020/03/21/Web%E7%AC%94%E8%AE%B0_css%E5%9F%BA%E7%A1%80/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://cll4ac.github.io/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><canvas class="fireworks"></canvas><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Sky</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">11</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Catalog</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Redis学习笔记（一）"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">Redis学习笔记（一）</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#一、Redis介绍"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">一、Redis介绍</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1、Redis发展的背景"><span class="toc_mobile_items-number">1.1.1.</span> <span class="toc_mobile_items-text">1、Redis发展的背景</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-1-互联网“三高”"><span class="toc_mobile_items-number">1.1.1.1.</span> <span class="toc_mobile_items-text">1.1 互联网“三高”</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-2-传统数据库"><span class="toc_mobile_items-number">1.1.1.2.</span> <span class="toc_mobile_items-text">1.2 传统数据库</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-3-NoSQL应运而生"><span class="toc_mobile_items-number">1.1.1.3.</span> <span class="toc_mobile_items-text">1.3 NoSQL应运而生</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-4-NoSQL数据库的分类"><span class="toc_mobile_items-number">1.1.1.4.</span> <span class="toc_mobile_items-text">1.4 NoSQL数据库的分类</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2、Redis的介绍"><span class="toc_mobile_items-number">1.1.2.</span> <span class="toc_mobile_items-text">2、Redis的介绍</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3、Redis特点"><span class="toc_mobile_items-number">1.1.3.</span> <span class="toc_mobile_items-text">3、Redis特点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4、Redis与Memcached的区别"><span class="toc_mobile_items-number">1.1.4.</span> <span class="toc_mobile_items-text">4、Redis与Memcached的区别</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5、Redis的数据结构"><span class="toc_mobile_items-number">1.1.5.</span> <span class="toc_mobile_items-text">5、Redis的数据结构</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6、参考资料"><span class="toc_mobile_items-number">1.1.6.</span> <span class="toc_mobile_items-text">6、参考资料</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#二、Redis安装"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">二、Redis安装</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1、下载Redis安装包"><span class="toc_mobile_items-number">1.2.1.</span> <span class="toc_mobile_items-text">1、下载Redis安装包</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2、环境搭建"><span class="toc_mobile_items-number">1.2.2.</span> <span class="toc_mobile_items-text">2、环境搭建</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3、解压"><span class="toc_mobile_items-number">1.2.3.</span> <span class="toc_mobile_items-text">3、解压</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4、编译"><span class="toc_mobile_items-number">1.2.4.</span> <span class="toc_mobile_items-text">4、编译</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5、配置文件"><span class="toc_mobile_items-number">1.2.5.</span> <span class="toc_mobile_items-text">5、配置文件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6、启动与关闭Redis服务"><span class="toc_mobile_items-number">1.2.6.</span> <span class="toc_mobile_items-text">6、启动与关闭Redis服务</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#7、启动与关闭Redis客服端"><span class="toc_mobile_items-number">1.2.7.</span> <span class="toc_mobile_items-text">7、启动与关闭Redis客服端</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#8、测试"><span class="toc_mobile_items-number">1.2.8.</span> <span class="toc_mobile_items-text">8、测试</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#三、Redis命令"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">三、Redis命令</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1、字符串-String"><span class="toc_mobile_items-number">1.3.1.</span> <span class="toc_mobile_items-text">1、字符串(String)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-1-类型介绍"><span class="toc_mobile_items-number">1.3.1.1.</span> <span class="toc_mobile_items-text">1.1 类型介绍</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-2-命令列表"><span class="toc_mobile_items-number">1.3.1.2.</span> <span class="toc_mobile_items-text">1.2 命令列表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-3-命令实例"><span class="toc_mobile_items-number">1.3.1.3.</span> <span class="toc_mobile_items-text">1.3 命令实例</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-4-应用场景"><span class="toc_mobile_items-number">1.3.1.4.</span> <span class="toc_mobile_items-text">1.4 应用场景</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2、哈希-Hash"><span class="toc_mobile_items-number">1.3.2.</span> <span class="toc_mobile_items-text">2、哈希(Hash)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-1-类型介绍"><span class="toc_mobile_items-number">1.3.2.1.</span> <span class="toc_mobile_items-text">2.1 类型介绍</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-2-命令列表"><span class="toc_mobile_items-number">1.3.2.2.</span> <span class="toc_mobile_items-text">2.2 命令列表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-3-命令实例"><span class="toc_mobile_items-number">1.3.2.3.</span> <span class="toc_mobile_items-text">2.3 命令实例</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-4-应用场景"><span class="toc_mobile_items-number">1.3.2.4.</span> <span class="toc_mobile_items-text">2.4 应用场景</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3、列表-List"><span class="toc_mobile_items-number">1.3.3.</span> <span class="toc_mobile_items-text">3、列表(List)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-1-类型介绍"><span class="toc_mobile_items-number">1.3.3.1.</span> <span class="toc_mobile_items-text">3.1 类型介绍</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-2-命令列表"><span class="toc_mobile_items-number">1.3.3.2.</span> <span class="toc_mobile_items-text">3.2 命令列表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-3-命令实例"><span class="toc_mobile_items-number">1.3.3.3.</span> <span class="toc_mobile_items-text">3.3 命令实例</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-4-应用场景"><span class="toc_mobile_items-number">1.3.3.4.</span> <span class="toc_mobile_items-text">3.4 应用场景</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4、集合-Set"><span class="toc_mobile_items-number">1.3.4.</span> <span class="toc_mobile_items-text">4、集合(Set)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-1类型介绍"><span class="toc_mobile_items-number">1.3.4.1.</span> <span class="toc_mobile_items-text">4.1类型介绍</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-2命令列表"><span class="toc_mobile_items-number">1.3.4.2.</span> <span class="toc_mobile_items-text">4.2命令列表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-3命令实例"><span class="toc_mobile_items-number">1.3.4.3.</span> <span class="toc_mobile_items-text">4.3命令实例</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-4应用场景"><span class="toc_mobile_items-number">1.3.4.4.</span> <span class="toc_mobile_items-text">4.4应用场景</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5、有序集合-sorted-set"><span class="toc_mobile_items-number">1.3.5.</span> <span class="toc_mobile_items-text">5、有序集合(sorted set)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-1-类型介绍"><span class="toc_mobile_items-number">1.3.5.1.</span> <span class="toc_mobile_items-text">5.1 类型介绍</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-2-命令列表"><span class="toc_mobile_items-number">1.3.5.2.</span> <span class="toc_mobile_items-text">5.2 命令列表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-3-命令实例"><span class="toc_mobile_items-number">1.3.5.3.</span> <span class="toc_mobile_items-text">5.3 命令实例</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-4-应用场景"><span class="toc_mobile_items-number">1.3.5.4.</span> <span class="toc_mobile_items-text">5.4 应用场景</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6、其他命令"><span class="toc_mobile_items-number">1.3.6.</span> <span class="toc_mobile_items-text">6、其他命令</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#6-1-命令列表"><span class="toc_mobile_items-number">1.3.6.1.</span> <span class="toc_mobile_items-text">6.1 命令列表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#6-2-命令实例"><span class="toc_mobile_items-number">1.3.6.2.</span> <span class="toc_mobile_items-text">6.2 命令实例</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#6-3-应用场景"><span class="toc_mobile_items-number">1.3.6.3.</span> <span class="toc_mobile_items-text">6.3 应用场景</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#四、Redis的API"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">四、Redis的API</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1、环境搭建"><span class="toc_mobile_items-number">1.4.1.</span> <span class="toc_mobile_items-text">1、环境搭建</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2、使用"><span class="toc_mobile_items-number">1.4.2.</span> <span class="toc_mobile_items-text">2、使用</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-1-入门案例"><span class="toc_mobile_items-number">1.4.2.1.</span> <span class="toc_mobile_items-text">2.1 入门案例</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-2-Jedis的连接池"><span class="toc_mobile_items-number">1.4.2.2.</span> <span class="toc_mobile_items-text">2.2 Jedis的连接池</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-3-测试"><span class="toc_mobile_items-number">1.4.2.3.</span> <span class="toc_mobile_items-text">2.3 测试</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis学习笔记（一）"><span class="toc-number">1.</span> <span class="toc-text">Redis学习笔记（一）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、Redis介绍"><span class="toc-number">1.1.</span> <span class="toc-text">一、Redis介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、Redis发展的背景"><span class="toc-number">1.1.1.</span> <span class="toc-text">1、Redis发展的背景</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-互联网“三高”"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">1.1 互联网“三高”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-传统数据库"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">1.2 传统数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-NoSQL应运而生"><span class="toc-number">1.1.1.3.</span> <span class="toc-text">1.3 NoSQL应运而生</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-NoSQL数据库的分类"><span class="toc-number">1.1.1.4.</span> <span class="toc-text">1.4 NoSQL数据库的分类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、Redis的介绍"><span class="toc-number">1.1.2.</span> <span class="toc-text">2、Redis的介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、Redis特点"><span class="toc-number">1.1.3.</span> <span class="toc-text">3、Redis特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4、Redis与Memcached的区别"><span class="toc-number">1.1.4.</span> <span class="toc-text">4、Redis与Memcached的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5、Redis的数据结构"><span class="toc-number">1.1.5.</span> <span class="toc-text">5、Redis的数据结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6、参考资料"><span class="toc-number">1.1.6.</span> <span class="toc-text">6、参考资料</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、Redis安装"><span class="toc-number">1.2.</span> <span class="toc-text">二、Redis安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、下载Redis安装包"><span class="toc-number">1.2.1.</span> <span class="toc-text">1、下载Redis安装包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、环境搭建"><span class="toc-number">1.2.2.</span> <span class="toc-text">2、环境搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、解压"><span class="toc-number">1.2.3.</span> <span class="toc-text">3、解压</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4、编译"><span class="toc-number">1.2.4.</span> <span class="toc-text">4、编译</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5、配置文件"><span class="toc-number">1.2.5.</span> <span class="toc-text">5、配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6、启动与关闭Redis服务"><span class="toc-number">1.2.6.</span> <span class="toc-text">6、启动与关闭Redis服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7、启动与关闭Redis客服端"><span class="toc-number">1.2.7.</span> <span class="toc-text">7、启动与关闭Redis客服端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8、测试"><span class="toc-number">1.2.8.</span> <span class="toc-text">8、测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、Redis命令"><span class="toc-number">1.3.</span> <span class="toc-text">三、Redis命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、字符串-String"><span class="toc-number">1.3.1.</span> <span class="toc-text">1、字符串(String)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-类型介绍"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">1.1 类型介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-命令列表"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">1.2 命令列表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-命令实例"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">1.3 命令实例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-应用场景"><span class="toc-number">1.3.1.4.</span> <span class="toc-text">1.4 应用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、哈希-Hash"><span class="toc-number">1.3.2.</span> <span class="toc-text">2、哈希(Hash)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-类型介绍"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">2.1 类型介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-命令列表"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">2.2 命令列表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-命令实例"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">2.3 命令实例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-应用场景"><span class="toc-number">1.3.2.4.</span> <span class="toc-text">2.4 应用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、列表-List"><span class="toc-number">1.3.3.</span> <span class="toc-text">3、列表(List)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-类型介绍"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">3.1 类型介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-命令列表"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">3.2 命令列表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-命令实例"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">3.3 命令实例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-应用场景"><span class="toc-number">1.3.3.4.</span> <span class="toc-text">3.4 应用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4、集合-Set"><span class="toc-number">1.3.4.</span> <span class="toc-text">4、集合(Set)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1类型介绍"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">4.1类型介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2命令列表"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">4.2命令列表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3命令实例"><span class="toc-number">1.3.4.3.</span> <span class="toc-text">4.3命令实例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4应用场景"><span class="toc-number">1.3.4.4.</span> <span class="toc-text">4.4应用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5、有序集合-sorted-set"><span class="toc-number">1.3.5.</span> <span class="toc-text">5、有序集合(sorted set)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-类型介绍"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">5.1 类型介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-命令列表"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">5.2 命令列表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-命令实例"><span class="toc-number">1.3.5.3.</span> <span class="toc-text">5.3 命令实例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-应用场景"><span class="toc-number">1.3.5.4.</span> <span class="toc-text">5.4 应用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6、其他命令"><span class="toc-number">1.3.6.</span> <span class="toc-text">6、其他命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-命令列表"><span class="toc-number">1.3.6.1.</span> <span class="toc-text">6.1 命令列表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-命令实例"><span class="toc-number">1.3.6.2.</span> <span class="toc-text">6.2 命令实例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-应用场景"><span class="toc-number">1.3.6.3.</span> <span class="toc-text">6.3 应用场景</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、Redis的API"><span class="toc-number">1.4.</span> <span class="toc-text">四、Redis的API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、环境搭建"><span class="toc-number">1.4.1.</span> <span class="toc-text">1、环境搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、使用"><span class="toc-number">1.4.2.</span> <span class="toc-text">2、使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-入门案例"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">2.1 入门案例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-Jedis的连接池"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">2.2 Jedis的连接池</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-测试"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">2.3 测试</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png)"><div id="post-info"><div id="post-title"><div class="posttitle">redis/Redis学习笔记（一）</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> Created 2020-08-04<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> Updated 2020-07-09</time><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>Post View:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><html><head></head><body><h1 id="Redis学习笔记（一）"><a href="#Redis学习笔记（一）" class="headerlink" title="Redis学习笔记（一）"></a>Redis学习笔记（一）</h1><h2 id="一、Redis介绍"><a href="#一、Redis介绍" class="headerlink" title="一、Redis介绍"></a>一、Redis介绍</h2><h3 id="1、Redis发展的背景"><a href="#1、Redis发展的背景" class="headerlink" title="1、Redis发展的背景"></a>1、Redis发展的背景</h3><h4 id="1-1-互联网“三高”"><a href="#1-1-互联网“三高”" class="headerlink" title="1.1 互联网“三高”"></a>1.1 互联网“三高”</h4><p>  随着互联网Web2.0网站的兴起，传统的关系数据库在应付Web2.0网站，特别是超大规模和高并发的SNS类型的Web2.0纯动态网站已经显得力不从心，暴露了很多难以克服的问题：</p>
<ol>
<li>对数据库高并发读写的需求</li>
</ol>
<p>  网站要根据用户个性化信息来实时生成动态页面和提供动态信息，所以基本上无法使用动态页面静态化技术，因此数据库并发负载非常高，往往要达到每秒上万次读写请求。关系数据库应付上万次SQL查询还勉强顶得住，但是应付上千万次SQL写数据请求，硬盘IO就已经无法承受了。</p>
<ol start="2">
<li>对海量数据的高效率存储和访问的需求</li>
</ol>
<p>  对于大型的SNS网站，每天用户产生海量的用户动态，以国外的Friendfeed为例，一个月就达到了2.5亿条用户动态，对于关系数据库来说，在一张2.5亿条记录的表里面进行SQL查询，效率是极其低下乃至不可忍受的。</p>
<ol start="3">
<li>对数据库的高可扩展性和高可用性的需求</li>
</ol>
<p>  在基于Web的架构当中，数据库是最难进行横向扩展的，当一个应用系统的用户量和访问量与日俱增的时候，你的数据库却没有办法像Web服务器和应用服务器那样简单的通过添加更多的硬件和服务节点来扩展性能和负载能力。对于很多需要提供7*24小时不间断服务的网站来说，对数据库系统进行升级和扩展是非常痛苦的事情，往往需要停机维护和数据迁移，为什么数据库不能通过不断的添加服务器节点来实现扩展呢？</p>
<h4 id="1-2-传统数据库"><a href="#1-2-传统数据库" class="headerlink" title="1.2 传统数据库"></a>1.2 传统数据库</h4><p>  在上面提到的“三高”的需求面前，关系数据库遇到了难以克服的障碍，而对于Web2.0网站来说，关系数据库的很多主要特性却往往无用武之地，例如：</p>
<ol>
<li>数据库事务一致性需求</li>
</ol>
<p>　　很多Web实时系统并不要求严格的数据库事务，对读一致性的要求很低，有些场合对写一致性要求也不高。因此数据库事务管理成了数据库高负载下一个沉重的负担。</p>
<ol start="2">
<li>数据库的写实时性和读实时性需求</li>
</ol>
<p>　　对关系数据库来说，插入一条数据之后立刻查询，是肯定可以读出来这条数据的。并不要求这么高的实时性。</p>
<ol start="3">
<li>对复杂的SQL查询，特别是多表关联查询的需求</li>
</ol>
<p>　　任何大数据量的Web系统，都非常忌讳多个大表的关联查询，以及复杂的数据分析类型的复杂SQL报表查询，特别是SNS类型的网站，从需求以及产品设计角度，就避免了这种情况的产生。往往更多的只是单表的主键查询，以及单表的简单条件分页查询，SQL的功能被极大的弱化了。</p>
<p>因为以上的种种原因，关系数据库在这些越来越多的应用场景下显得不那么合适了，为了解决这类问题的非关系数据库应运而生。</p>
<p>NoSQL (not only sql)是非关系型数据存储的广义定义。它打破了长久以来关系型数据库与ACID理论大一统的局面。</p>
<p>NoSQL 数据存储不需要固定的表结构（例如以键值对存储，它的结构不固定，每一个元组可以有不一样的字段，每个元组可以根据需要增加一些自己的键值对，这样就不会局限于固定的结构，可以减少一些时间和空间的开销），通常也不存在连接操作。</p>
<h4 id="1-3-NoSQL应运而生"><a href="#1-3-NoSQL应运而生" class="headerlink" title="1.3 NoSQL应运而生"></a>1.3 NoSQL应运而生</h4><p>  在大数据存取上具备关系型数据库无法比拟的性能优势，例如：</p>
<ol>
<li>易扩展</li>
</ol>
<p>　　NoSQL数据库种类繁多，但是一个共同的特点都是去掉关系数据库的关系型特性。数据之间无关系，这样就非常容易扩展。也无形之间，在架构的层面上带来了可扩展的能力。</p>
<ol start="2">
<li>大数据量，高性能</li>
</ol>
<p>　　NoSQL数据库都具有非常高的读写性能，尤其在大数据量下，同样表现优秀。这得益于它的无关系性，数据库的结构简单。</p>
<ol start="3">
<li>灵活的数据模型</li>
</ol>
<p>　　NoSQL无需事先为要存储的数据建立字段，随时可以存储自定义的数据格式。而在关系数据库里，增删字段是一件非常麻烦的事情。如果是非常大数据量的表，增加字段简直就是一个噩梦。这点在大数据量的Web2.0时代尤其明显。</p>
<ol start="4">
<li>高可用</li>
</ol>
<p>　　NoSQL在不太影响性能的情况，就可以方便的实现高可用的架构。比如Cassandra，HBase模型，通过复制模型也能实现高可用。</p>
<h4 id="1-4-NoSQL数据库的分类"><a href="#1-4-NoSQL数据库的分类" class="headerlink" title="1.4 NoSQL数据库的分类"></a>1.4 NoSQL数据库的分类</h4><ol>
<li>键值(Key-Value)存储数据库</li>
</ol>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">相关产品： Tokyo Cabinet/Tyrant、Redis、Voldemort、Berkeley DB</span><br><span class="line">典型应用： 内容缓存，主要用于处理大量数据的高访问负载。 </span><br><span class="line">数据模型： 一系列键值对</span><br><span class="line">优势： 快速查询</span><br><span class="line">劣势： 存储的数据缺少结构化</span><br></pre></td></tr></tbody></table></figure></div>

<ol start="2">
<li>列存储数据库</li>
</ol>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">相关产品：Cassandra, HBase, Riak</span><br><span class="line">典型应用：分布式的文件系统</span><br><span class="line">数据模型：以列簇式存储，将同一列数据存在一起</span><br><span class="line">优势：查找速度快，可扩展性强，更容易进行分布式扩展</span><br><span class="line">劣势：功能相对局限</span><br></pre></td></tr></tbody></table></figure></div>

<ol start="3">
<li>文档型数据库</li>
</ol>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">相关产品：CouchDB、MongoDB</span><br><span class="line">典型应用：Web应用（与Key-Value类似，Value是结构化的一般是json）</span><br><span class="line">数据模型： 一系列键值对</span><br><span class="line"> 优势：数据结构要求不严格</span><br><span class="line"> 劣势： 查询性能不高，而且缺乏统一的查询语法</span><br></pre></td></tr></tbody></table></figure></div>

<ol start="4">
<li>图形(Graph)数据库</li>
</ol>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">相关数据库：Neo4J、InfoGrid、Infinite Graph</span><br><span class="line">典型应用：社交网络</span><br><span class="line">数据模型：图结构</span><br><span class="line">优势：利用图结构相关算法。</span><br><span class="line">劣势：需要对整个图做计算才能得出结果，不容易做分布式的集群方案。</span><br></pre></td></tr></tbody></table></figure></div>

<h3 id="2、Redis的介绍"><a href="#2、Redis的介绍" class="headerlink" title="2、Redis的介绍"></a>2、Redis的介绍</h3><p>  Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 它支持多种类型的数据结构，如 <a href="http://www.redis.cn/topics/data-types-intro.html#strings" target="_blank" rel="noopener">字符串（strings）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#hashes" target="_blank" rel="noopener">散列（hashes）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#lists" target="_blank" rel="noopener">列表（lists）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#sets" target="_blank" rel="noopener">集合（sets）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#sorted-sets" target="_blank" rel="noopener">有序集合（sorted sets）</a> 与范围查询， <a href="http://www.redis.cn/topics/data-types-intro.html#bitmaps" target="_blank" rel="noopener">bitmaps</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#hyperloglogs" target="_blank" rel="noopener">hyperloglogs</a> 和 <a href="http://www.redis.cn/commands/geoadd.html" target="_blank" rel="noopener">地理空间（geospatial）</a> 索引半径查询。 Redis 内置了 <a href="http://www.redis.cn/topics/replication.html" target="_blank" rel="noopener">复制（replication）</a>，<a href="http://www.redis.cn/commands/eval.html" target="_blank" rel="noopener">LUA脚本（Lua scripting）</a>， <a href="http://www.redis.cn/topics/lru-cache.html" target="_blank" rel="noopener">LRU驱动事件（LRU eviction）</a>，<a href="http://www.redis.cn/topics/transactions.html" target="_blank" rel="noopener">事务（transactions）</a> 和不同级别的 <a href="http://www.redis.cn/topics/persistence.html" target="_blank" rel="noopener">磁盘持久化（persistence）</a>， 并通过 <a href="http://www.redis.cn/topics/sentinel.html" target="_blank" rel="noopener">Redis哨兵（Sentinel）</a>和自动 <a href="http://www.redis.cn/topics/cluster-tutorial.html" target="_blank" rel="noopener">分区（Cluster）</a>提供高可用性（high availability）。</p>
<p>  Redis是一个开源的、使用C语言编写的、支持网络交互的、可基于内存也可持久化的Key-Value数据库。</p>
<h3 id="3、Redis特点"><a href="#3、Redis特点" class="headerlink" title="3、Redis特点"></a>3、Redis特点</h3><ul>
<li><p>高效性：Redis读取的速度是110000次/s，写的速度是81000次/s</p>
</li>
<li><p>原子性：Redis的所有操作都是原子性的，同时Redis还支持对几个操作全并后的原子性执行。</p>
</li>
<li><p>支持多种数据结构：string（字符串）；list（列表）；hash（哈希），set（集合）；zset(有序集合)</p>
</li>
<li><p>稳定性：持久化，主从复制（集群）</p>
</li>
<li><p>其他特性：支持过期时间，支持(半)事务，消息订阅。</p>
</li>
<li><p>缺点:Redis的ACID处理非常简单,无法做到太复杂的关系数据库模型</p>
</li>
</ul>
<h3 id="4、Redis与Memcached的区别"><a href="#4、Redis与Memcached的区别" class="headerlink" title="4、Redis与Memcached的区别"></a>4、Redis与Memcached的区别</h3><p>  Memcached是Redis之前诞生的比较流行的NoSQL, 不支持数据持久化(也就是数据都存在内存中)</p>
<h3 id="5、Redis的数据结构"><a href="#5、Redis的数据结构" class="headerlink" title="5、Redis的数据结构"></a>5、Redis的数据结构</h3><ul>
<li>String: 字符串</li>
<li>Hash: 散列</li>
<li>List: 列表</li>
<li>Set: 集合</li>
<li>Sorted Set: 有序集合</li>
</ul>
<h3 id="6、参考资料"><a href="#6、参考资料" class="headerlink" title="6、参考资料"></a>6、参考资料</h3><p>  <a href="https://redis.io/" target="_blank" rel="noopener">Redis 官网</a></p>
<p>  <a href="http://www.redis.cn/" target="_blank" rel="noopener">Redis中文网站</a></p>
<p>  <a href="https://www.runoob.com/redis/redis-tutorial.html" target="_blank" rel="noopener">Redis菜鸟教程</a></p>
<h2 id="二、Redis安装"><a href="#二、Redis安装" class="headerlink" title="二、Redis安装"></a>二、Redis安装</h2><h3 id="1、下载Redis安装包"><a href="#1、下载Redis安装包" class="headerlink" title="1、下载Redis安装包"></a>1、下载Redis安装包</h3><p>  前往Redis官网下载<a href="http://www.redis.cn/download.html" target="_blank" rel="noopener">Redis安装包</a>，并上传到linux</p>
<h3 id="2、环境搭建"><a href="#2、环境搭建" class="headerlink" title="2、环境搭建"></a>2、环境搭建</h3><p>因为Redis是C语言编写的，需要c语言编译环境。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">安装c语言环境</span></span><br><span class="line">yum -y install gcc gcc-c++ libstdc++-devel tcl -y</span><br></pre></td></tr></tbody></table></figure></div>

<p>创建一次目录</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">redis的安装目录</span></span><br><span class="line">mkdir -p /export/servers</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">redis的压缩包目录</span></span><br><span class="line">mkdir -p /export/software</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">redis的日志目录</span></span><br><span class="line">mkdir -p /export/logs</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">redis的数据存放目录</span></span><br><span class="line">mkdir -p /export/data</span><br><span class="line">mkdir -p /export/data/redis/6379/</span><br></pre></td></tr></tbody></table></figure></div>

<h3 id="3、解压"><a href="#3、解压" class="headerlink" title="3、解压"></a>3、解压</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">进入Redis安装包目录</span></span><br><span class="line">cd /export/software/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">解压安装</span></span><br><span class="line">tar -zxvf redis-4.0.2.tar.gz  -C ../servers</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">解压之后是源码，所以将解压后的文件夹改名为redis-src</span></span><br><span class="line">mv redis-4.0.2 redis-src</span><br></pre></td></tr></tbody></table></figure></div>

<h3 id="4、编译"><a href="#4、编译" class="headerlink" title="4、编译"></a>4、编译</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">进入Redis目录内</span></span><br><span class="line">cd /export/servers/redis-src/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">编译安装</span></span><br><span class="line">make MALLOC=libc</span><br><span class="line">make PREFIX=/export/servers/redis install</span><br></pre></td></tr></tbody></table></figure></div>

<h3 id="5、配置文件"><a href="#5、配置文件" class="headerlink" title="5、配置文件"></a>5、配置文件</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">在redis的目录内创建conf目录</span></span><br><span class="line">mkdir -p /export/servers/redis/conf</span><br><span class="line"><span class="meta">#</span><span class="bash">进入conf目录</span></span><br><span class="line">cd /export/servers/redis/conf</span><br></pre></td></tr></tbody></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">编写一个配置文件</span></span><br><span class="line">vim redis_6379.conf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">进入redis_6379.conf文件后</span></span><br><span class="line"><span class="meta">#</span><span class="bash">插入一下内容</span></span><br><span class="line">bind node-03</span><br><span class="line">protected-mode yes</span><br><span class="line">port 6379</span><br><span class="line">tcp-backlog 511</span><br><span class="line">timeout 0</span><br><span class="line">tcp-keepalive 300</span><br><span class="line">daemonize yes</span><br><span class="line">supervised no</span><br><span class="line">pidfile /export/data/redis/6379/redis_6379.pid</span><br><span class="line">loglevel notice</span><br><span class="line">logfile "/export/data/redis/6379/log.log"</span><br><span class="line">databases 16</span><br><span class="line">always-show-logo yes</span><br><span class="line">save 900 1</span><br><span class="line">save 300 10</span><br><span class="line">save 60 10000</span><br><span class="line">stop-writes-on-bgsave-error yes</span><br><span class="line">rdbcompression yes</span><br><span class="line">rdbchecksum yes</span><br><span class="line">dbfilename dump.rdb</span><br><span class="line">dir /export/data/redis/6379/</span><br><span class="line">slave-serve-stale-data yes</span><br><span class="line">slave-read-only yes</span><br><span class="line">repl-diskless-sync no</span><br><span class="line">repl-diskless-sync-delay 5</span><br><span class="line">repl-disable-tcp-nodelay no</span><br><span class="line">slave-priority 100</span><br><span class="line">lazyfree-lazy-eviction no</span><br><span class="line">lazyfree-lazy-expire no</span><br><span class="line">lazyfree-lazy-server-del no</span><br><span class="line">slave-lazy-flush no</span><br><span class="line">appendonly yes</span><br><span class="line">appendfilename "appendonly.aof"</span><br><span class="line">appendfsync everysec</span><br><span class="line">no-appendfsync-on-rewrite no</span><br><span class="line">auto-aof-rewrite-percentage 100</span><br><span class="line">auto-aof-rewrite-min-size 64mb</span><br><span class="line">aof-load-truncated yes</span><br><span class="line">aof-use-rdb-preamble no</span><br><span class="line">lua-time-limit 5000</span><br><span class="line">slowlog-log-slower-than 10000</span><br><span class="line">slowlog-max-len 128</span><br><span class="line">latency-monitor-threshold 0</span><br><span class="line">notify-keyspace-events ""</span><br><span class="line">hash-max-ziplist-entries 512</span><br><span class="line">hash-max-ziplist-value 64</span><br><span class="line">list-max-ziplist-size -2</span><br><span class="line">list-compress-depth 0</span><br><span class="line">set-max-intset-entries 512</span><br><span class="line">zset-max-ziplist-entries 128</span><br><span class="line">zset-max-ziplist-value 64</span><br><span class="line">hll-sparse-max-bytes 3000</span><br><span class="line">activerehashing yes</span><br><span class="line">client-output-buffer-limit normal 0 0 0</span><br><span class="line">client-output-buffer-limit slave 256mb 64mb 60</span><br><span class="line">client-output-buffer-limit pubsub 32mb 8mb 60</span><br><span class="line">hz 10</span><br><span class="line">aof-rewrite-incremental-fsync yes</span><br></pre></td></tr></tbody></table></figure></div>

<p>配置文件的各个属性的解释如下：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line">1 daemonize  no</span><br><span class="line">默认情况下，redis 不是在后台运行的，如果需要在后台运行，把该项的值更改为yes。</span><br><span class="line"></span><br><span class="line">2 pidfile  /var/run/redis.pid</span><br><span class="line">当Redis 在后台运行的时候，Redis 默认会把pid 文件放在/var/run/redis.pid，你可以配置到其他地址。当运行多个redis 服务时，需要指定不同的pid 文件和端口</span><br><span class="line"></span><br><span class="line">3 port</span><br><span class="line">监听端口，默认为6379</span><br><span class="line"></span><br><span class="line">4 #bind 127.0.0.1</span><br><span class="line">指定Redis 只接收来自于该IP 地址的请求，如果不进行设置，那么将处理所有请求，在生产环境中为了安全最好设置该项。默认注释掉，不开启</span><br><span class="line"></span><br><span class="line">5 timeout 0</span><br><span class="line">设置客户端连接时的超时时间，单位为秒。当客户端在这段时间内没有发出任何指令，那么关闭该连接</span><br><span class="line"></span><br><span class="line">6 tcp-keepalive 0</span><br><span class="line">指定TCP连接是否为长连接,"侦探"信号有server端维护。默认为0.表示禁用</span><br><span class="line"></span><br><span class="line">7 loglevel notice</span><br><span class="line">log 等级分为4 级，debug,verbose, notice, 和warning。生产环境下一般开启notice</span><br><span class="line"></span><br><span class="line">8 logfile stdout</span><br><span class="line">配置log 文件地址，默认使用标准输出，即打印在命令行终端的窗口上，修改为日志文件目录</span><br><span class="line"></span><br><span class="line">9 databases 16</span><br><span class="line">设置数据库的个数，可以使用SELECT 命令来切换数据库。默认使用的数据库是0号库。默认16个库</span><br><span class="line"></span><br><span class="line">10 </span><br><span class="line">save 900 1</span><br><span class="line">save 300 10</span><br><span class="line">save 60 10000</span><br><span class="line">保存数据快照的频率，即将数据持久化到dump.rdb文件中的频度。用来描述"在多少秒期间至少多少个变更操作"触发snapshot数据保存动作</span><br><span class="line">默认设置，意思是：</span><br><span class="line">if(在60 秒之内有10000 个keys 发生变化时){</span><br><span class="line"></span><br><span class="line">进行镜像备份</span><br><span class="line"></span><br><span class="line">}else if(在300 秒之内有10 个keys 发生了变化){</span><br><span class="line"></span><br><span class="line">进行镜像备份</span><br><span class="line"></span><br><span class="line">}else if(在900 秒之内有1 个keys 发生了变化){</span><br><span class="line"></span><br><span class="line">进行镜像备份</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">11 stop-writes-on-bgsave-error yes</span><br><span class="line">当持久化出现错误时，是否依然继续进行工作，是否终止所有的客户端write请求。默认设置"yes"表示终止，一旦snapshot数据保存故障，那么此server为只读服务。如果为"no"，那么此次snapshot将失败，但下一次snapshot不会受到影响，不过如果出现故障,数据只能恢复到"最近一个成功点"</span><br><span class="line"></span><br><span class="line">12 rdbcompression yes</span><br><span class="line">在进行数据镜像备份时，是否启用rdb文件压缩手段，默认为yes。压缩可能需要额外的cpu开支，不过这能够有效的减小rdb文件的大，有利于存储/备份/传输/数据恢复</span><br><span class="line"></span><br><span class="line">13 rdbchecksum yes</span><br><span class="line">读取和写入时候，会损失10%性能</span><br><span class="line"></span><br><span class="line">14 rdbchecksum yes</span><br><span class="line">是否进行校验和，是否对rdb文件使用CRC64校验和,默认为"yes"，那么每个rdb文件内容的末尾都会追加CRC校验和，利于第三方校验工具检测文件完整性</span><br><span class="line"></span><br><span class="line">14 dbfilename dump.rdb</span><br><span class="line">镜像备份文件的文件名，默认为 dump.rdb</span><br><span class="line"></span><br><span class="line">15 dir ./</span><br><span class="line">数据库镜像备份的文件rdb/AOF文件放置的路径。这里的路径跟文件名要分开配置是因为Redis 在进行备份时，先会将当前数据库的状态写入到一个临时文件中，等备份完成时，再把该临时文件替换为上面所指定的文件，而这里的临时文件和上面所配置的备份文件都会放在这个指定的路径当中</span><br><span class="line"></span><br><span class="line">16 # slaveof <masterip> <masterport></masterport></masterip></span><br><span class="line">设置该数据库为其他数据库的从数据库，并为其指定master信息。</span><br><span class="line"></span><br><span class="line">17 masterauth</span><br><span class="line">当主数据库连接需要密码验证时，在这里指定</span><br><span class="line"></span><br><span class="line">18 slave-serve-stale-data yes</span><br><span class="line">当主master服务器挂机或主从复制在进行时，是否依然可以允许客户访问可能过期的数据。在"yes"情况下,slave继续向客户端提供只读服务,有可能此时的数据已经过期；在"no"情况下，任何向此server发送的数据请求服务(包括客户端和此server的slave)都将被告知"error"</span><br><span class="line"></span><br><span class="line">19 slave-read-only yes</span><br><span class="line">slave是否为"只读"，强烈建议为"yes"</span><br><span class="line"></span><br><span class="line">20 # repl-ping-slave-period 10</span><br><span class="line">slave向指定的master发送ping消息的时间间隔(秒)，默认为10</span><br><span class="line"></span><br><span class="line">21 # repl-timeout 60</span><br><span class="line">slave与master通讯中,最大空闲时间,默认60秒.超时将导致连接关闭</span><br><span class="line"></span><br><span class="line">22 repl-disable-tcp-nodelay no</span><br><span class="line">slave与master的连接,是否禁用TCP nodelay选项。"yes"表示禁用,那么socket通讯中数据将会以packet方式发送(packet大小受到socket buffer限制)。</span><br><span class="line">可以提高socket通讯的效率(tcp交互次数),但是小数据将会被buffer,不会被立即发送,对于接受者可能存在延迟。"no"表示开启tcp nodelay选项,任何数据都会被立即发送,及时性较好,但是效率较低，建议设为no</span><br><span class="line"></span><br><span class="line">23 slave-priority 100</span><br><span class="line">适用Sentinel模块(unstable,M-S集群管理和监控),需要额外的配置文件支持。slave的权重值,默认100.当master失效后,Sentinel将会从slave列表中找到权重值最低(>0)的slave,并提升为master。如果权重值为0,表示此slave为"观察者",不参与master选举</span><br><span class="line"></span><br><span class="line">24 # requirepass foobared</span><br><span class="line">设置客户端连接后进行任何其他指定前需要使用的密码。警告：因为redis 速度相当快，所以在一台比较好的服务器下，一个外部的用户可以在一秒钟进行150K 次的密码尝试，这意味着你需要指定非常非常强大的密码来防止暴力破解。</span><br><span class="line"></span><br><span class="line">25 # rename-command CONFIG 3ed984507a5dcd722aeade310065ce5d    (方式:MD5('CONFIG^!'))</span><br><span class="line">重命名指令,对于一些与"server"控制有关的指令,可能不希望远程客户端(非管理员用户)链接随意使用,那么就可以把这些指令重命名为"难以阅读"的其他字符串</span><br><span class="line"></span><br><span class="line">26 # maxclients 10000</span><br><span class="line">限制同时连接的客户数量。当连接数超过这个值时，redis 将不再接收其他连接请求，客户端尝试连接时将收到error 信息。默认为10000，要考虑系统文件描述符限制，不宜过大，浪费文件描述符，具体多少根据具体情况而定</span><br><span class="line"></span><br><span class="line">27 # maxmemory <bytes></bytes></span><br><span class="line">redis-cache所能使用的最大内存(bytes),默认为0,表示"无限制",最终由OS物理内存大小决定(如果物理内存不足,有可能会使用swap)。此值尽量不要超过机器的物理内存尺寸,从性能和实施的角度考虑,可以为物理内存3/4。此配置需要和"maxmemory-policy"配合使用,当redis中内存数据达到maxmemory时,触发"清除策略"。在"内存不足"时,任何write操作(比如set,lpush等)都会触发"清除策略"的执行。在实际环境中,建议redis的所有物理机器的硬件配置保持一致(内存一致),同时确保master/slave中"maxmemory""policy"配置一致。</span><br><span class="line"></span><br><span class="line">当内存满了的时候，如果还接收到set 命令，redis 将先尝试剔除设置过expire 信息的key，而不管该key 的过期时间还没有到达。在删除时，</span><br><span class="line"></span><br><span class="line">将按照过期时间进行删除，最早将要被过期的key 将最先被删除。如果带有expire 信息的key 都删光了，内存还不够用，那么将返回错误。这样，redis 将不再接收写请求，只接收get 请求。maxmemory 的设置比较适合于把redis 当作于类似memcached的缓存来使用。</span><br><span class="line"></span><br><span class="line">28 # maxmemory-policy volatile-lru</span><br><span class="line">内存不足"时,数据清除策略,默认为"volatile-lru"。</span><br><span class="line">volatile-lru  ->对"过期集合"中的数据采取LRU(近期最少使用)算法.如果对key使用"expire"指令指定了过期时间,那么此key将会被添加到"过期集合"中。将已经过期/LRU的数据优先移除.如果"过期集合"中全部移除仍不能满足内存需求,将OOM.</span><br><span class="line">allkeys-lru ->对所有的数据,采用LRU算法</span><br><span class="line">volatile-random ->对"过期集合"中的数据采取"随即选取"算法,并移除选中的K-V,直到"内存足够"为止. 如果如果"过期集合"中全部移除全部移除仍不能满足,将OOM</span><br><span class="line">allkeys-random ->对所有的数据,采取"随机选取"算法,并移除选中的K-V,直到"内存足够"为止</span><br><span class="line">volatile-ttl ->对"过期集合"中的数据采取TTL算法(最小存活时间),移除即将过期的数据.</span><br><span class="line">noeviction ->不做任何干扰操作,直接返回OOM异常</span><br><span class="line">另外，如果数据的过期不会对"应用系统"带来异常,且系统中write操作比较密集,建议采取"allkeys-lru"</span><br><span class="line"></span><br><span class="line">29 # maxmemory-samples 3</span><br><span class="line">默认值3，上面LRU和最小TTL策略并非严谨的策略，而是大约估算的方式，因此可以选择取样值以便检查</span><br><span class="line"></span><br><span class="line">29 appendonly no</span><br><span class="line">默认情况下，redis 会在后台异步的把数据库镜像备份到磁盘，但是该备份是非常耗时的，而且备份也不能很频繁。所以redis 提供了另外一种更加高效的数据库备份及灾难恢复方式。开启append only 模式之后，redis 会把所接收到的每一次写操作请求都追加到appendonly.aof 文件中，当redis 重新启动时，会从该文件恢复出之前的状态。但是这样会造成appendonly.aof 文件过大，所以redis 还支持了BGREWRITEAOF 指令，对appendonly.aof 进行重新整理。如果不经常进行数据迁移操作，推荐生产环境下的做法为关闭镜像，开启appendonly.aof，同时可以选择在访问较少的时间每天对appendonly.aof 进行重写一次。</span><br><span class="line">另外，对master机器,主要负责写，建议使用AOF,对于slave,主要负责读，挑选出1-2台开启AOF，其余的建议关闭</span><br><span class="line"></span><br><span class="line">30 # appendfilename appendonly.aof</span><br><span class="line">aof文件名字，默认为appendonly.aof</span><br><span class="line"></span><br><span class="line">31 </span><br><span class="line"># appendfsync always</span><br><span class="line">appendfsync everysec</span><br><span class="line"># appendfsync no</span><br><span class="line">设置对appendonly.aof 文件进行同步的频率。always 表示每次有写操作都进行同步，everysec 表示对写操作进行累积，每秒同步一次。no不主动fsync，由OS自己来完成。这个需要根据实际业务场景进行配置</span><br><span class="line"></span><br><span class="line">32 no-appendfsync-on-rewrite no</span><br><span class="line">在aof rewrite期间,是否对aof新记录的append暂缓使用文件同步策略,主要考虑磁盘IO开支和请求阻塞时间。默认为no,表示"不暂缓",新的aof记录仍然会被立即同步</span><br><span class="line"></span><br><span class="line">33 auto-aof-rewrite-percentage 100</span><br><span class="line">当Aof log增长超过指定比例时，重写log file， 设置为0表示不自动重写Aof 日志，重写是为了使aof体积保持最小，而确保保存最完整的数据。</span><br><span class="line"></span><br><span class="line">34 auto-aof-rewrite-min-size 64mb</span><br><span class="line">触发aof rewrite的最小文件尺寸</span><br><span class="line"></span><br><span class="line">35 lua-time-limit 5000</span><br><span class="line">lua脚本运行的最大时间</span><br><span class="line"></span><br><span class="line">36 slowlog-log-slower-than 10000</span><br><span class="line">"慢操作日志"记录,单位:微秒(百万分之一秒,1000 * 1000),如果操作时间超过此值,将会把command信息"记录"起来.(内存,非文件)。其中"操作时间"不包括网络IO开支,只包括请求达到server后进行"内存实施"的时间."0"表示记录全部操作</span><br><span class="line"></span><br><span class="line">37 slowlog-max-len 128</span><br><span class="line">"慢操作日志"保留的最大条数,"记录"将会被队列化,如果超过了此长度,旧记录将会被移除。可以通过"SLOWLOG <subcommand> args"查看慢记录的信息(SLOWLOG get 10,SLOWLOG reset)</subcommand></span><br><span class="line"></span><br><span class="line">38 hash-max-ziplist-entries 512</span><br><span class="line">hash类型的数据结构在编码上可以使用ziplist和hashtable。ziplist的特点就是文件存储(以及内存存储)所需的空间较小,在内容较小时,性能和hashtable几乎一样.因此redis对hash类型默认采取ziplist。如果hash中条目的条目个数或者value长度达到阀值,将会被重构为hashtable。</span><br><span class="line">这个参数指的是ziplist中允许存储的最大条目个数，，默认为512，建议为128</span><br><span class="line">hash-max-ziplist-value 64</span><br><span class="line">ziplist中允许条目value值最大字节数，默认为64，建议为1024</span><br><span class="line"></span><br><span class="line">39 </span><br><span class="line">list-max-ziplist-entries 512</span><br><span class="line">list-max-ziplist-value 64</span><br><span class="line">对于list类型,将会采取ziplist,linkedlist两种编码类型。解释同上。</span><br><span class="line"></span><br><span class="line">40 set-max-intset-entries 512</span><br><span class="line">intset中允许保存的最大条目个数,如果达到阀值,intset将会被重构为hashtable</span><br><span class="line"></span><br><span class="line">41 </span><br><span class="line">zset-max-ziplist-entries 128</span><br><span class="line">zset-max-ziplist-value 64</span><br><span class="line">zset为有序集合,有2中编码类型:ziplist,skiplist。因为"排序"将会消耗额外的性能,当zset中数据较多时,将会被重构为skiplist。</span><br><span class="line"></span><br><span class="line">42 activerehashing yes</span><br><span class="line">是否开启顶层数据结构的rehash功能,如果内存允许,请开启。rehash能够很大程度上提高K-V存取的效率</span><br><span class="line"></span><br><span class="line">43 </span><br><span class="line">client-output-buffer-limit normal 0 0 0</span><br><span class="line">client-output-buffer-limit slave 256mb 64mb 60</span><br><span class="line">client-output-buffer-limit pubsub 32mb 8mb 60</span><br><span class="line">客户端buffer控制。在客户端与server进行的交互中,每个连接都会与一个buffer关联,此buffer用来队列化等待被client接受的响应信息。如果client不能及时的消费响应信息,那么buffer将会被不断积压而给server带来内存压力.如果buffer中积压的数据达到阀值,将会导致连接被关闭,buffer被移除。</span><br><span class="line">buffer控制类型包括:normal -> 普通连接；slave ->与slave之间的连接；pubsub ->pub/sub类型连接，此类型的连接，往往会产生此种问题;因为pub端会密集的发布消息,但是sub端可能消费不足.</span><br><span class="line">指令格式:client-output-buffer-limit <class> <hard> <soft> <seconds>",其中hard表示buffer最大值,一旦达到阀值将立即关闭连接;</seconds></soft></hard></class></span><br><span class="line">soft表示"容忍值",它和seconds配合,如果buffer值超过soft且持续时间达到了seconds,也将立即关闭连接,如果超过了soft但是在seconds之后，buffer数据小于了soft,连接将会被保留.</span><br><span class="line">其中hard和soft都设置为0,则表示禁用buffer控制.通常hard值大于soft.</span><br><span class="line"></span><br><span class="line">44 hz 10</span><br><span class="line">Redis server执行后台任务的频率,默认为10,此值越大表示redis对"间歇性task"的执行次数越频繁(次数/秒)。"间歇性task"包括"过期集合"检测、关闭"空闲超时"的连接等,此值必须大于0且小于500。此值过小就意味着更多的cpu周期消耗,后台task被轮询的次数更频繁。此值过大意味着"内存敏感"性较差。建议采用默认值。</span><br><span class="line"></span><br><span class="line">45 </span><br><span class="line"># include /path/to/local.conf</span><br><span class="line"># include /path/to/other.conf</span><br><span class="line">额外载入配置文件。</span><br></pre></td></tr></tbody></table></figure></div>

<h3 id="6、启动与关闭Redis服务"><a href="#6、启动与关闭Redis服务" class="headerlink" title="6、启动与关闭Redis服务"></a>6、启动与关闭Redis服务</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">进入redis目录内</span></span><br><span class="line">cd /export/servers/redis/bin/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">启动redis服务器</span></span><br><span class="line">./redis-server ../conf/redis_6379.conf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">验证是否启动成功</span></span><br><span class="line">ps -ef | grep redis</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">关闭redis服务</span></span><br><span class="line"><span class="meta">#</span><span class="bash">方式一：</span></span><br><span class="line">/export/servers/redis/bin/redis-cli  -h node-03 shutdown</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">方式二：</span></span><br><span class="line"><span class="meta">#</span><span class="bash">查看redis的进程</span></span><br><span class="line">ps -ef | grep redis  </span><br><span class="line"><span class="meta">#</span><span class="bash">杀死进程</span></span><br><span class="line">kill -9 进程号</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">方式三：</span></span><br><span class="line">pkill redis-server</span><br></pre></td></tr></tbody></table></figure></div>

<h3 id="7、启动与关闭Redis客服端"><a href="#7、启动与关闭Redis客服端" class="headerlink" title="7、启动与关闭Redis客服端"></a>7、启动与关闭Redis客服端</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">进入redis目录内</span></span><br><span class="line">cd /export/servers/redis/bin/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">打开redis客户端</span></span><br><span class="line">./redis-cli -h node-03</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">关闭redis客服端</span></span><br><span class="line">exit</span><br></pre></td></tr></tbody></table></figure></div>

<h3 id="8、测试"><a href="#8、测试" class="headerlink" title="8、测试"></a>8、测试</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">在客户端输入ping</span></span><br><span class="line">ping</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">返回结果为PONG,说明启动成功</span></span><br></pre></td></tr></tbody></table></figure></div>

<h2 id="三、Redis命令"><a href="#三、Redis命令" class="headerlink" title="三、Redis命令"></a>三、Redis命令</h2><p>   Redis命令十分丰富，包括的命令组有Cluster、Connection、Geo、Hashes、HyperLogLog、Keys、Lists、Pub/Sub、Scripting、Server、Sets、Sorted Sets、Strings、Transactions一共14个redis命令组两百多个redis命令，<a href="http://www.redis.cn/commands.html" target="_blank" rel="noopener">Redis中文命令大全</a>。基本的命令如下：</p>
<h3 id="1、字符串-String"><a href="#1、字符串-String" class="headerlink" title="1、字符串(String)"></a>1、字符串(String)</h3><h4 id="1-1-类型介绍"><a href="#1-1-类型介绍" class="headerlink" title="1.1 类型介绍"></a>1.1 类型介绍</h4><p>  String(字符串)：它是 Redis 最基本的数据类型，一个 Key 对应一个 Value。</p>
<p>  <strong>注意</strong>:</p>
<p>    1.String类型的Value最大为512MB</p>
<p>    2.如果Value中存储的String为数字格式，如 ‘’123”,  还可以对它进行加减, 那么就意味着, Redis中的String类型可以做累加器</p>
<h4 id="1-2-命令列表"><a href="#1-2-命令列表" class="headerlink" title="1.2 命令列表"></a>1.2 命令列表</h4><table>
<thead>
<tr>
<th><strong>命令原型</strong></th>
<th><strong>时间复杂度</strong></th>
<th><strong>命令描述</strong></th>
<th><strong>返回值</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>APPEND</strong>key value</td>
<td>O(1)</td>
<td>如果该Key已经存在，APPEND命令将参数Value的数据追加到已存在Value的末尾。如果该Key不存在，APPEND命令将会创建一个新的Key/Value。</td>
<td>追加后Value的长度。</td>
</tr>
<tr>
<td><strong>DECR</strong> key</td>
<td>O(1)</td>
<td>将指定Key的Value原子性的递减1。如果该Key不存在，其初始值为0，在decr之后其值为-1。如果Value的值不能转换为整型值，如Hello，该操作将执行失败并返回相应的错误信息。注意：该操作的取值范围是64位有符号整型。</td>
<td>递减后的Value值。</td>
</tr>
<tr>
<td><strong>INCR</strong> key</td>
<td>O(1)</td>
<td>将指定Key的Value原子性的递增1。如果该Key不存在，其初始值为0，在incr之后其值为1。如果Value的值不能转换为整型值，如Hello，该操作将执行失败并返回相应的错误信息。注意：该操作的取值范围是64位有符号整型。</td>
<td>递增后的Value值。</td>
</tr>
<tr>
<td><strong>DECRBY</strong> key decrement</td>
<td>O(1)</td>
<td>将指定Key的Value原子性的减少decrement。如果该Key不存在，其初始值为0，在decrby之后其值为-decrement。如果Value的值不能转换为整型值，如Hello，该操作将执行失败并返回相应的错误信息。注意：该操作的取值范围是64位有符号整型。</td>
<td>减少后的Value值。</td>
</tr>
<tr>
<td><strong>INCRBY</strong> key increment</td>
<td>O(1)</td>
<td>将指定Key的Value原子性的增加increment。如果该Key不存在，其初始值为0，在incrby之后其值为increment。如果Value的值不能转换为整型值，如Hello，该操作将执行失败并返回相应的错误信息。注意：该操作的取值范围是64位有符号整型。</td>
<td>增加后的Value值。</td>
</tr>
<tr>
<td><strong>GET</strong> key</td>
<td>O(1)</td>
<td>获取指定Key的Value。如果与该Key关联的Value不是string类型，Redis将返回错误信息，因为GET命令只能用于获取string Value。</td>
<td>与该Key相关的Value，如果该Key不存在，返回nil。</td>
</tr>
<tr>
<td><strong>SET</strong>key value</td>
<td>O(1)</td>
<td>设定该Key持有指定的字符串Value，如果该Key已经存在，则覆盖其原有值。</td>
<td>总是返回”OK”。</td>
</tr>
<tr>
<td><strong>GETSET</strong>key value</td>
<td>O(1)</td>
<td>原子性的设置该Key为指定的Value，同时返回该Key的原有值。和GET命令一样，该命令也只能处理string Value，否则Redis将给出相关的错误信息。</td>
<td>返回该Key的原有值，如果该Key之前并不存在，则返回nil。</td>
</tr>
<tr>
<td><strong>STRLEN</strong> key</td>
<td>O(1)</td>
<td>返回指定Key的字符值长度，如果Value不是string类型，Redis将执行失败并给出相关的错误信息。</td>
<td>返回指定Key的Value字符长度，如果该Key不存在，返回0。</td>
</tr>
<tr>
<td><strong>SETEX</strong> key seconds value</td>
<td>O(1)</td>
<td>原子性完成两个操作，一是设置该Key的值为指定字符串，同时设置该Key在Redis服务器中的存活时间(秒数)。该命令主要应用于Redis被当做Cache服务器使用时。</td>
<td></td>
</tr>
<tr>
<td><strong>SETNX</strong> key value</td>
<td>O(1)</td>
<td>如果指定的Key不存在，则设定该Key持有指定字符串Value，此时其效果等价于SET命令。相反，如果该Key已经存在，该命令将不做任何操作并返回。</td>
<td>1表示设置成功，否则0。</td>
</tr>
<tr>
<td><strong>SETRANGE</strong> key offset value</td>
<td>O(1)</td>
<td>替换指定Key的部分字符串值。从offset开始，替换的长度为该命令第三个参数value的字符串长度，其中如果offset的值大于该Key的原有值Value的字符串长度，Redis将会在Value的后面补齐(offset - strlen(value))数量的0x00，之后再追加新值。如果该键不存在，该命令会将其原值的长度假设为0，并在其后添补offset个0x00后再追加新值。鉴于字符串Value的最大长度为512M，因此offset的最大值为536870911。最后需要注意的是，如果该命令在执行时致使指定Key的原有值长度增加，这将会导致Redis重新分配足够的内存以容纳替换后的全部字符串，因此就会带来一定的性能折损。</td>
<td>修改后的字符串Value长度。</td>
</tr>
<tr>
<td><strong>GETRANGE</strong> key start end</td>
<td>O(1)</td>
<td>如果截取的字符串长度很短，我们可以该命令的时间复杂度视为O(1)，否则就是O(N)，这里N表示截取的子字符串长度。该命令在截取子字符串时，将以闭区间的方式同时包含start<em>(0表示第一个字符)</em>和end所在的字符，如果end值超过Value的字符长度，该命令将只是截取从start开始之后所有的字符数据。</td>
<td>子字符串</td>
</tr>
<tr>
<td><strong>SETBIT</strong> key offset value</td>
<td>O(1)</td>
<td>设置在指定Offset上BIT的值，该值只能为1或0，在设定后该命令返回该Offset上原有的BIT值。如果指定Key不存在，该命令将创建一个新值，并在指定的Offset上设定参数中的BIT值。如果Offset大于Value的字符长度，Redis将拉长Value值并在指定Offset上设置参数中的BIT值，中间添加的BIT值为0。最后需要说明的是Offset值必须大于0。</td>
<td>在指定Offset上的BIT原有值。</td>
</tr>
<tr>
<td><strong>GETBIT</strong> key offset</td>
<td>O(1)</td>
<td>返回在指定Offset上BIT的值，0或1。如果Offset超过string value的长度，该命令将返回0，所以对于空字符串始终返回0。</td>
<td>在指定Offset上的BIT值。</td>
</tr>
<tr>
<td><strong>MGET</strong>key [key …]</td>
<td>O(N)</td>
<td>N表示获取Key的数量。返回所有指定Keys的Values，如果其中某个Key不存在，或者其值不为string类型，该Key的Value将返回nil。</td>
<td>返回一组指定Keys的Values的列表。</td>
</tr>
<tr>
<td><strong>MSET</strong> key value [key value …]</td>
<td>O(N)</td>
<td>N表示指定Key的数量。该命令原子性的完成参数中所有key/value的设置操作，其具体行为可以看成是多次迭代执行SET命令。</td>
<td>该命令不会失败，始终返回OK。</td>
</tr>
<tr>
<td><strong>MSETNX</strong> key value [key value …]</td>
<td>O(N)</td>
<td>N表示指定Key的数量。该命令原子性的完成参数中所有key/value的设置操作，其具体行为可以看成是多次迭代执行SETNX命令。然而这里需要明确说明的是，<em>如果在这一批Keys中有任意一个Key已经存在了，那么该操作将全部回滚，即所有的修改都不会生效。</em></td>
<td>1表示所有Keys都设置成功，0则表示没有任何Key被修改。</td>
</tr>
</tbody></table>
<h4 id="1-3-命令实例"><a href="#1-3-命令实例" class="headerlink" title="1.3 命令实例"></a>1.3 命令实例</h4><p>打开Redis的客户端。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查看所有的key</span></span><br><span class="line">node01:6379> keys *</span><br><span class="line">(empty list or set)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">添加一条数据操作</span></span><br><span class="line">node01:6379> set k1 v1</span><br><span class="line">OK</span><br><span class="line">node01:6379> keys *</span><br><span class="line">1) "k1"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">根据key获取数据</span></span><br><span class="line">node01:6379> get k1</span><br><span class="line">"v1"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">为一个 Key 设置 Value（值）并返回之前值</span></span><br><span class="line">node01:6379> getset k1 vv</span><br><span class="line">"v1"</span><br><span class="line">node01:6379> get k1</span><br><span class="line">"vv"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">添加多条数据</span></span><br><span class="line">node01:6379> mset k1 v11 k2 v2 k3 v3</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">一次性获取多条数据数据</span></span><br><span class="line">node01:6379> mget k1 k2 k3</span><br><span class="line">1) "v11"</span><br><span class="line">2) "v2"</span><br><span class="line">3) "v3"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">添加一条数据并设置过期时间(单位s)</span></span><br><span class="line">node01:6379> setex k4 20 v4</span><br><span class="line">OK</span><br><span class="line">node01:6379> get k4</span><br><span class="line">"v4"</span><br><span class="line">node01:6379> setex k4 20 v44</span><br><span class="line">OK</span><br><span class="line">node01:6379> get k4</span><br><span class="line">"v44"</span><br><span class="line">或者</span><br><span class="line">node01:6379> set k4 v4 ex 20</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">添加一条数据(只有key 不存在的情况, 才可以设置, 否则不允许添加数据)</span></span><br><span class="line">node01:6379> setnx k5 v5</span><br><span class="line">(integer) 1</span><br><span class="line">node01:6379> get k5</span><br><span class="line">"v5"</span><br><span class="line">node01:6379> setnx k5 v55</span><br><span class="line">(integer) 0</span><br><span class="line">node01:6379> get k5</span><br><span class="line">"v5"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">根据key获取value的长度</span></span><br><span class="line">node01:6379> get k1</span><br><span class="line">"v11"</span><br><span class="line">node01:6379> strlen k1</span><br><span class="line">(integer) 3</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">拼接字符串</span></span><br><span class="line">node01:6379> get k1</span><br><span class="line">"v11"</span><br><span class="line">node01:6379> append k1 110</span><br><span class="line">(integer) 6</span><br><span class="line">node01:6379> get k1</span><br><span class="line">"v11110"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">原子加减</span></span><br><span class="line">node01:6379> set count 0</span><br><span class="line">OK</span><br><span class="line">node01:6379> get count</span><br><span class="line">"0"</span><br><span class="line">node01:6379> incr count</span><br><span class="line">(integer) 1</span><br><span class="line">node01:6379> get count</span><br><span class="line">"1"</span><br><span class="line">node01:6379> decr count</span><br><span class="line">(integer) 0</span><br><span class="line">node01:6379> get count</span><br><span class="line">"0"</span><br><span class="line">node01:6379> incrby count 10</span><br><span class="line">(integer) 10</span><br><span class="line">node01:6379> get count</span><br><span class="line">"10"</span><br><span class="line">node01:6379> decrby count 10</span><br><span class="line">(integer) 0</span><br><span class="line">node01:6379> get count</span><br><span class="line">"0"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">总结</span></span><br><span class="line">INCR key : ++  </span><br><span class="line">DECR key: --</span><br><span class="line">INCRBY key increment :++具体的值</span><br><span class="line">DECRBY key decrement : --具体的值</span><br><span class="line">操作的key对应的value必须是数字格式</span><br></pre></td></tr></tbody></table></figure></div>



<h4 id="1-4-应用场景"><a href="#1-4-应用场景" class="headerlink" title="1.4 应用场景"></a>1.4 应用场景</h4><ul>
<li>做缓存, 如短信验证码, key是手机号, value是验证码的值 , 还可以设置一个60s过期时间</li>
<li>做累计计数, 如秒杀场景下的防超卖==, key是商品id, value是商品已被秒杀的数量,</li>
</ul>
<h3 id="2、哈希-Hash"><a href="#2、哈希-Hash" class="headerlink" title="2、哈希(Hash)"></a>2、哈希(Hash)</h3><h4 id="2-1-类型介绍"><a href="#2-1-类型介绍" class="headerlink" title="2.1 类型介绍"></a>2.1 类型介绍</h4><p>  Hash是一个string 类型的field和value的映射表。一般用来存储对象。</p>
<p><a href="https://s1.ax1x.com/2020/07/08/UEjWiq.png" target="_blank" rel="noopener" data-fancybox="group" data-caption="UEjWiq.png" class="fancybox"><img alt="UEjWiq.png" title="UEjWiq.png" data-src="https://s1.ax1x.com/2020/07/08/UEjWiq.png" class="lazyload"></a></p>
<h4 id="2-2-命令列表"><a href="#2-2-命令列表" class="headerlink" title="2.2 命令列表"></a>2.2 命令列表</h4><table>
<thead>
<tr>
<th><strong>命令原型</strong></th>
<th><strong>时间复杂度</strong></th>
<th><strong>命令描述</strong></th>
<th><strong>返回值</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>HSET</strong> key field value</td>
<td>O(1)</td>
<td>为指定的Key设定Field/Value对，如果Key不存在，该命令将创建新Key以参数中的Field/Value对，如果参数中的Field在该Key中已经存在，则用新值覆盖其原有值。</td>
<td>1表示新的Field被设置了新值，0表示Field已经存在，用新值覆盖原有值。</td>
</tr>
<tr>
<td><strong>HGET</strong> key field</td>
<td>O(1)</td>
<td>返回指定Key中指定Field的关联值。</td>
<td>返回参数中Field的关联值，如果参数中的Key或Field不存，返回nil。</td>
</tr>
<tr>
<td><strong>HEXISTS</strong>key field</td>
<td>O(1)</td>
<td>判断指定Key中的指定Field是否存在。</td>
<td>1表示存在，0表示参数中的Field或Key不存在。</td>
</tr>
<tr>
<td><strong>HLEN</strong> key</td>
<td>O(1)</td>
<td>获取该Key所包含的Field的数量。</td>
<td>返回Key包含的Field数量，如果Key不存在，返回0。</td>
</tr>
<tr>
<td><strong>HDEL</strong> key field [field …]</td>
<td>O(N)</td>
<td>时间复杂度中的N表示参数中待删除的字段数量。从指定Key的Hashes Value中删除参数中指定的多个字段，如果不存在的字段将被忽略。如果Key不存在，则将其视为空Hashes，并返回0.</td>
<td>实际删除的Field数量。</td>
</tr>
<tr>
<td><strong>HSETNX</strong>key field value</td>
<td>O(1)</td>
<td>只有当参数中的Key或Field不存在的情况下，为指定的Key设定Field/Value对，否则该命令不会进行任何操作。</td>
<td>1表示新的Field被设置了新值，0表示Key或Field已经存在，该命令没有进行任何操作。</td>
</tr>
<tr>
<td><strong>HINCRBY</strong>key field increment</td>
<td>O(1)</td>
<td>增加指定Key中指定Field关联的Value的值。如果Key或Field不存在，该命令将会创建一个新Key或新Field，并将其关联的Value初始化为0，之后再指定数字增加的操作。该命令支持的数字是64位有符号整型，即increment可以负数。</td>
<td>返回运算后的值。</td>
</tr>
<tr>
<td><strong>HGETALL</strong>key</td>
<td>O(N)</td>
<td>时间复杂度中的N表示Key包含的Field数量。获取该键包含的所有Field/Value。其返回格式为一个Field、一个Value，并以此类推。</td>
<td>Field/Value的列表。</td>
</tr>
<tr>
<td><strong>HKEYS</strong>key</td>
<td>O(N)</td>
<td>时间复杂度中的N表示Key包含的Field数量。返回指定Key的所有Fields名。</td>
<td>Field的列表。</td>
</tr>
<tr>
<td><strong>HVALS</strong>key</td>
<td>O(N)</td>
<td>时间复杂度中的N表示Key包含的Field数量。返回指定Key的所有Values名。</td>
<td>Value的列表。</td>
</tr>
<tr>
<td><strong>HMGET</strong>key field [field …]</td>
<td>O(N)</td>
<td>时间复杂度中的N表示请求的Field数量。获取和参数中指定Fields关联的一组Values。如果请求的Field不存在，其值返回nil。如果Key不存在，该命令将其视为空Hash，因此返回一组nil。</td>
<td>返回和请求Fields关联的一组Values，其返回顺序等同于Fields的请求顺序。</td>
</tr>
<tr>
<td><strong>HMSET</strong> key field value [field value …]</td>
<td>O(N)</td>
<td>时间复杂度中的N表示被设置的Field数量。逐对依次设置参数中给出的Field/Value对。如果其中某个Field已经存在，则用新值覆盖原有值。如果Key不存在，则创建新Key，同时设定参数中的Field/Value。</td>
<td></td>
</tr>
</tbody></table>
<h4 id="2-3-命令实例"><a href="#2-3-命令实例" class="headerlink" title="2.3 命令实例"></a>2.3 命令实例</h4><p>打开redis客户端</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">添加并获取元素</span></span><br><span class="line">node01:6379> hset user001 username jack</span><br><span class="line">(integer) 1</span><br><span class="line">node01:6379> hget user001 username</span><br><span class="line">"jack"</span><br><span class="line">node01:6379> hget user001 age</span><br><span class="line">(nil)</span><br><span class="line">node01:6379> hset user001 age 18</span><br><span class="line">(integer) 1</span><br><span class="line">node01:6379> hget user001 age</span><br><span class="line">"18"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">获取键的字段数量</span></span><br><span class="line">node01:6379> hlen user001</span><br><span class="line">(integer) 2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">判断键中是否存在指定字段</span></span><br><span class="line">node01:6379> hexists user001 username</span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">删除键中指定字段</span></span><br><span class="line">node01:6379> hdel user001 username</span><br><span class="line">(integer) 1</span><br><span class="line">node01:6379> hlen user001</span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">操作数值型字段的值，返回操作后的结果。</span></span><br><span class="line">node01:6379> hincrby user001 age 1</span><br><span class="line">(integer) 19</span><br><span class="line">node01:6379> hincrby user001 age -1</span><br><span class="line">(integer) 18</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">一次性设置多个字段</span></span><br><span class="line">node01:6379> hmset user001 username jack nickname jackma</span><br><span class="line">OK</span><br><span class="line">node01:6379> hlen user001 </span><br><span class="line">(integer) 3</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">获取键的多个字段</span></span><br><span class="line">node01:6379> hmget user001 username age nickname xx</span><br><span class="line">1) "jack"</span><br><span class="line">2) "18"</span><br><span class="line">3) "jackma"</span><br><span class="line">4) (nil)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">返回键的所有字段及其值</span></span><br><span class="line">hgetall user001</span><br><span class="line">1) "age"</span><br><span class="line">2) "18"</span><br><span class="line">3) "username"</span><br><span class="line">4) "jack"</span><br><span class="line">5) "nickname"</span><br><span class="line">6) "jackma"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">仅获取键中所有字段的名</span></span><br><span class="line">hkeys user001</span><br><span class="line">1) "age"</span><br><span class="line">2) "username"</span><br><span class="line">3) "nickname"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">仅获取键中所有字段的值</span></span><br><span class="line">hvals user001</span><br><span class="line">1) "18"</span><br><span class="line">2) "jack"</span><br><span class="line">3) "jackma"</span><br></pre></td></tr></tbody></table></figure></div>

<h4 id="2-4-应用场景"><a href="#2-4-应用场景" class="headerlink" title="2.4 应用场景"></a>2.4 应用场景</h4><ul>
<li><p>redis中的hash类型可以存储javabean对象</p>
</li>
<li><p>如实际开发中的购物车就可以用redis去做</p>
<p>key是用户的id, value是hash类型, hash表中的field是商品的id, hash的value是商品的数量</p>
</li>
</ul>
<h3 id="3、列表-List"><a href="#3、列表-List" class="headerlink" title="3、列表(List)"></a>3、列表(List)</h3><h4 id="3-1-类型介绍"><a href="#3-1-类型介绍" class="headerlink" title="3.1 类型介绍"></a>3.1 类型介绍</h4><p>  dis的另一个重要的数据结构叫List，翻译成中文叫做“列表”。Redis中的list在底层实现上并不是数组，而是双向链表，也就是说对于一个具有上百万个元素的list来说，在头部和尾部插入一个新元素，其时间复杂度是O(1)级别的，比如用LPUSH在10个元素的list头部插入新元素，和在上千万元素的list头部插入新元素的速度应该是相同的。</p>
<h4 id="3-2-命令列表"><a href="#3-2-命令列表" class="headerlink" title="3.2 命令列表"></a>3.2 命令列表</h4><table>
<thead>
<tr>
<th><strong>命令原型</strong></th>
<th><strong>时间复杂度</strong></th>
<th><strong>命令描述</strong></th>
<th><strong>返回值</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>LPUSH</strong>key value [value …]</td>
<td>O(1)</td>
<td>在指定Key所关联的List Value的头部插入参数中给出的所有Values。如果该Key不存在，该命令将在插入之前创建一个与该Key关联的空链表，之后再将数据从链表的头部插入。如果该键的Value不是链表类型，该命令将返回相关的错误信息。</td>
<td>插入后链表中元素的数量。</td>
</tr>
<tr>
<td><strong>LPUSHX</strong> key value</td>
<td>O(1)</td>
<td>仅有当参数中指定的Key存在时，该命令才会在其所关联的List Value的头部插入参数中给出的Value，否则将不会有任何操作发生。</td>
<td>插入后链表中元素的数量。</td>
</tr>
<tr>
<td><strong>LRANGE</strong> key start stop</td>
<td>O(S+N)</td>
<td>时间复杂度中的S为start参数表示的偏移量，N表示元素的数量。该命令的参数start和end都是0-based。即0表示链表头部(leftmost)的第一个元素。其中start的值也可以为负值，-1将表示链表中的最后一个元素，即尾部元素，-2表示倒数第二个并以此类推。该命令在获取元素时，start和end位置上的元素也会被取出。如果start的值大于链表中元素的数量，空链表将会被返回。如果end的值大于元素的数量，该命令则获取从start(包括start)开始，链表中剩余的所有元素。</td>
<td>返回指定范围内元素的列表。</td>
</tr>
<tr>
<td><strong>LPOP</strong>key</td>
<td>O(1)</td>
<td>返回并弹出指定Key关联的链表中的第一个元素，即头部元素，。如果该Key不存，返回nil。</td>
<td>链表头部的元素。</td>
</tr>
<tr>
<td><strong>LLEN</strong>key</td>
<td>O(1)</td>
<td>返回指定Key关联的链表中元素的数量，如果该Key不存在，则返回0。如果与该Key关联的Value的类型不是链表，则返回相关的错误信息。</td>
<td>链表中元素的数量。</td>
</tr>
<tr>
<td><strong>LREM</strong>key count value</td>
<td>O(N)</td>
<td>时间复杂度中N表示链表中元素的数量。在指定Key关联的链表中，删除前count个值等于value的元素。如果count大于0，从头向尾遍历并删除，如果count小于0，则从尾向头遍历并删除。如果count等于0，则删除链表中所有等于value的元素。如果指定的Key不存在，则直接返回0。</td>
<td>返回被删除的元素数量。</td>
</tr>
<tr>
<td><strong>LSET</strong>key index value</td>
<td>O(N)</td>
<td>时间复杂度中N表示链表中元素的数量。但是设定头部或尾部的元素时，其时间复杂度为O(1)。设定链表中指定位置的值为新值，其中0表示第一个元素，即头部元素，-1表示尾部元素。如果索引值Index超出了链表中元素的数量范围，该命令将返回相关的错误信息。</td>
<td></td>
</tr>
<tr>
<td><strong>LINDEX</strong> key index</td>
<td>O(N)</td>
<td>时间复杂度中N表示在找到该元素时需要遍历的元素数量。对于头部或尾部元素，其时间复杂度为O(1)。该命令将返回链表中指定位置(index)的元素，index是0-based，表示头部元素，如果index为-1，表示尾部元素。如果与该Key关联的不是链表，该命令将返回相关的错误信息。</td>
<td>返回请求的元素，如果index超出范围，则返回nil。</td>
</tr>
<tr>
<td><strong>LTRIM</strong>key start stop</td>
<td>O(N)</td>
<td>N表示被删除的元素数量。该命令将仅保留指定范围内的元素，从而保证链接中的元素数量相对恒定。start和stop参数都是0-based，0表示头部元素。和其他命令一样，start和stop也可以为负值，-1表示尾部元素。如果start大于链表的尾部，或start大于stop，该命令不错报错，而是返回一个空的链表，与此同时该Key也将被删除。如果stop大于元素的数量，则保留从start开始剩余的所有元素。</td>
<td></td>
</tr>
<tr>
<td><strong>LINSERT</strong> key BEFORE|AFTER pivot value</td>
<td>O(N)</td>
<td>时间复杂度中N表示在找到该元素pivot之前需要遍历的元素数量。这样意味着如果pivot位于链表的头部或尾部时，该命令的时间复杂度为O(1)。该命令的功能是在pivot元素的前面或后面插入参数中的元素value。如果Key不存在，该命令将不执行任何操作。如果与Key关联的Value类型不是链表，相关的错误信息将被返回。</td>
<td>成功插入后链表中元素的数量，如果没有找到pivot，返回-1，如果key不存在，返回0。</td>
</tr>
<tr>
<td><strong>RPUSH</strong> key value [value …]</td>
<td>O(1)</td>
<td>在指定Key所关联的List Value的尾部插入参数中给出的所有Values。如果该Key不存在，该命令将在插入之前创建一个与该Key关联的空链表，之后再将数据从链表的尾部插入。如果该键的Value不是链表类型，该命令将返回相关的错误信息。</td>
<td>插入后链表中元素的数量。</td>
</tr>
<tr>
<td><strong>RPUSHX</strong> key value</td>
<td>O(1)</td>
<td>仅有当参数中指定的Key存在时，该命令才会在其所关联的List Value的尾部插入参数中给出的Value，否则将不会有任何操作发生。</td>
<td>插入后链表中元素的数量。</td>
</tr>
<tr>
<td><strong>RPOP</strong>key</td>
<td>O(1)</td>
<td>返回并弹出指定Key关联的链表中的最后一个元素，即尾部元素，。如果该Key不存，返回nil。</td>
<td>链表尾部的元素。</td>
</tr>
<tr>
<td><strong>RPOPLPUSH</strong> source destination</td>
<td>O(1)</td>
<td>原子性的从与source键关联的链表尾部弹出一个元素，同时再将弹出的元素插入到与destination键关联的链表的头部。如果source键不存在，该命令将返回nil，同时不再做任何其它的操作了。如果source和destination是同一个键，则相当于原子性的将其关联链表中的尾部元素移到该链表的头部。</td>
<td>返回弹出和插入的元素。</td>
</tr>
</tbody></table>
<h4 id="3-3-命令实例"><a href="#3-3-命令实例" class="headerlink" title="3.3 命令实例"></a>3.3 命令实例</h4><p>打开Redis的客户端。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">先从左边往list中添加元素,再从右边往list中添加元素 -- c b a 1 2 3</span></span><br><span class="line">左c b a 1 2 3右</span><br><span class="line">node01:6379> lpush mylist a b c </span><br><span class="line">(integer) 3</span><br><span class="line">node01:6379> rpush mylist 1 2 3</span><br><span class="line">(integer) 6</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查看list的长度</span></span><br><span class="line">node01:6379> llen mylist</span><br><span class="line">(integer) 6</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查看list中的元素</span></span><br><span class="line">node01:6379> lrange mylist 0 5</span><br><span class="line">1) "c"</span><br><span class="line">2) "b"</span><br><span class="line">3) "a"</span><br><span class="line">4) "1"</span><br><span class="line">5) "2"</span><br><span class="line">6) "3"</span><br><span class="line">node01:6379> lrange mylist 0 -1</span><br><span class="line">1) "c"</span><br><span class="line">2) "b"</span><br><span class="line">3) "a"</span><br><span class="line">4) "1"</span><br><span class="line">5) "2"</span><br><span class="line">6) "3"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">获取索引为1的元素</span></span><br><span class="line">node01:6379> lindex mylist 1</span><br><span class="line">"b"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">从list左边弹出一个元素再从右边弹出一个元素</span></span><br><span class="line">cba123</span><br><span class="line">node01:6379> lpop mylist</span><br><span class="line">"c"</span><br><span class="line">node01:6379> rpop mylist</span><br><span class="line">"3"</span><br><span class="line">node01:6379> lrange mylist 0 -1</span><br><span class="line">1) "b"</span><br><span class="line">2) "a"</span><br><span class="line">3) "1"</span><br><span class="line">4) "2"</span><br><span class="line"></span><br><span class="line">阻塞列队</span><br><span class="line"><span class="meta">#</span><span class="bash">从list中弹出一个元素,如果有直接弹出,如果没有等待10s(等待的过程中,如果有元素放入则立即获取到并弹出),如果时间结束后依然没有,则返回空</span></span><br><span class="line">blpop mylist2 10 </span><br><span class="line">或者brpop mylist2 10</span><br><span class="line">开启另一个客户端往list中添加元素</span><br><span class="line">/export/servers/redis/bin/redis-cli -h node01 </span><br><span class="line">lpush mylist2 a </span><br><span class="line"></span><br><span class="line">注意:如果超时时间设置为 0,表示永久阻塞等待, 直到有数据产生,一般不用</span><br><span class="line"></span><br><span class="line">面试题:	</span><br><span class="line"><span class="meta">#</span><span class="bash">从list1中右侧弹出一个元素, 将这个元素从左侧添加到list2</span></span><br><span class="line">node01:6379> lpush list1 1 2</span><br><span class="line">(integer) 2</span><br><span class="line">node01:6379> lpush list2 a b</span><br><span class="line">(integer) 2</span><br><span class="line">node01:6379> lrange list1 0 -1</span><br><span class="line">1) "2"</span><br><span class="line">2) "1"</span><br><span class="line">node01:6379> lrange list2 0 -1</span><br><span class="line">1) "b"</span><br><span class="line">2) "a"</span><br><span class="line">node01:6379> rpoplpush list1 list2</span><br><span class="line">"1"</span><br><span class="line">node01:6379> lrange list2 0 -1</span><br><span class="line">1) "1"</span><br><span class="line">2) "b"</span><br><span class="line">3) "a"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">从list中删除2个指定的元素</span></span><br><span class="line">lpush mylist3 a b c a b c a b c </span><br><span class="line">node01:6379> lrange mylist3 0 -1</span><br><span class="line">1) "c"</span><br><span class="line">2) "b"</span><br><span class="line">3) "a"</span><br><span class="line">4) "c"</span><br><span class="line">5) "b"</span><br><span class="line">6) "a"</span><br><span class="line">7) "c"</span><br><span class="line">8) "b"</span><br><span class="line">9) "a"</span><br><span class="line">node01:6379> lrem mylist3 2 a  </span><br><span class="line">(integer) 2</span><br><span class="line">node01:6379> lrange mylist3 0 -1</span><br><span class="line">1) "c"</span><br><span class="line">2) "b"</span><br><span class="line">3) "c"</span><br><span class="line">4) "b"</span><br><span class="line">5) "c"</span><br><span class="line">6) "b"</span><br><span class="line">7) "a"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">设置指定位置的元素为新值</span></span><br><span class="line">node01:6379> lindex mylist3 0</span><br><span class="line">"c"</span><br><span class="line">node01:6379> lset mylist3 0 x</span><br><span class="line">OK</span><br><span class="line">node01:6379> lindex mylist3 0</span><br><span class="line">"x"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">设置保留指定索引的元素[0,2]</span></span><br><span class="line">node01:6379> lrange mylist3 0 -1</span><br><span class="line">1) "x"</span><br><span class="line">2) "b"</span><br><span class="line">3) "c"</span><br><span class="line">4) "b"</span><br><span class="line">5) "c"</span><br><span class="line">6) "b"</span><br><span class="line">7) "a"</span><br><span class="line">node01:6379> ltrim mylist3 0 2</span><br><span class="line">OK</span><br><span class="line">node01:6379> lrange mylist3 0 -1</span><br><span class="line">1) "x"</span><br><span class="line">2) "b"</span><br><span class="line">3) "c"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">往指定元素前/后插入元素</span></span><br><span class="line">node01:6379> linsert mylist3 before c cc</span><br><span class="line">(integer) 4</span><br><span class="line">node01:6379> lrange mylist3 0 -1</span><br><span class="line">1) "x"</span><br><span class="line">2) "b"</span><br><span class="line">3) "cc"</span><br><span class="line">4) "c"</span><br></pre></td></tr></tbody></table></figure></div>

<h4 id="3-4-应用场景"><a href="#3-4-应用场景" class="headerlink" title="3.4 应用场景"></a>3.4 应用场景</h4><ul>
<li>可以使用Redis中的List(底层是双向链表) , 模拟阻塞队列, 模型双端队列, 模拟栈</li>
<li>热门微博的评论列表</li>
<li>用lrange可以获取指定索引范围的元素,也就是可以实现==分页==效果</li>
</ul>
<h3 id="4、集合-Set"><a href="#4、集合-Set" class="headerlink" title="4、集合(Set)"></a>4、集合(Set)</h3><h4 id="4-1类型介绍"><a href="#4-1类型介绍" class="headerlink" title="4.1类型介绍"></a>4.1类型介绍</h4><p>  Redis中的Set类似于Java中的HashSet, <strong>Set集合中不允许出现重复的元素且是无序的</strong>。还需要特别注意的是Redis中的Set也支持多种集合运算,如求交集,并集,差集。</p>
<h4 id="4-2命令列表"><a href="#4-2命令列表" class="headerlink" title="4.2命令列表"></a>4.2命令列表</h4><table>
<thead>
<tr>
<th><strong>命令原型</strong></th>
<th><strong>时间复杂度</strong></th>
<th><strong>命令描述</strong></th>
<th><strong>返回值</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>SADD</strong>key member [member …]</td>
<td>O(N)</td>
<td>时间复杂度中的N表示操作的成员数量。如果在插入的过程用，参数中有的成员在Set中已经存在，该成员将被忽略，而其它成员仍将会被正常插入。如果执行该命令之前，该Key并不存在，该命令将会创建一个新的Set，此后再将参数中的成员陆续插入。如果该Key的Value不是Set类型，该命令将返回相关的错误信息。</td>
<td>本次操作实际插入的成员数量。</td>
</tr>
<tr>
<td><strong>SCARD</strong>key</td>
<td>O(1)</td>
<td>获取Set中成员的数量。</td>
<td>返回Set中成员的数量，如果该Key并不存在，返回0。</td>
</tr>
<tr>
<td><strong>SISMEMBER</strong> key member</td>
<td>O(1)</td>
<td>判断参数中指定成员是否已经存在于与Key相关联的Set集合中。</td>
<td>1表示已经存在，0表示不存在，或该Key本身并不存在。</td>
</tr>
<tr>
<td><strong>SMEMBERS</strong> key</td>
<td>O(N)</td>
<td>时间复杂度中的N表示Set中已经存在的成员数量。获取与该Key关联的Set中所有的成员。</td>
<td>返回Set中所有的成员。</td>
</tr>
<tr>
<td><strong>SPOP</strong>key</td>
<td>O(1)</td>
<td>随机的移除并返回Set中的某一成员。 由于Set中元素的布局不受外部控制，因此无法像List那样确定哪个元素位于Set的头部或者尾部。</td>
<td>返回移除的成员，如果该Key并不存在，则返回nil。</td>
</tr>
<tr>
<td><strong>SREM</strong>key member [member …]</td>
<td>O(N)</td>
<td>时间复杂度中的N表示被删除的成员数量。从与Key关联的Set中删除参数中指定的成员，不存在的参数成员将被忽略，如果该Key并不存在，将视为空Set处理。</td>
<td>从Set中实际移除的成员数量，如果没有则返回0。</td>
</tr>
<tr>
<td><strong>SRANDMEMBER</strong> key</td>
<td>O(1)</td>
<td>和SPOP一样，随机的返回Set中的一个成员，不同的是该命令并不会删除返回的成员。</td>
<td>返回随机位置的成员，如果Key不存在则返回nil。</td>
</tr>
<tr>
<td><strong>SMOVE</strong>source destination member</td>
<td>O(1)</td>
<td>原子性的将参数中的成员从source键移入到destination键所关联的Set中。因此在某一时刻，该成员或者出现在source中，或者出现在destination中。如果该成员在source中并不存在，该命令将不会再执行任何操作并返回0，否则，该成员将从source移入到destination。如果此时该成员已经在destination中存在，那么该命令仅是将该成员从source中移出。如果和Key关联的Value不是Set，将返回相关的错误信息。</td>
<td>1表示正常移动，0表示source中并不包含参数成员。</td>
</tr>
<tr>
<td><strong>SDIFF</strong>key [key …]</td>
<td>O(N)</td>
<td>时间复杂度中的N表示所有Sets中成员的总数量。返回参数中第一个Key所关联的Set和其后所有Keys所关联的Sets中成员的差异。如果Key不存在，则视为空Set。</td>
<td>差异结果成员的集合。</td>
</tr>
<tr>
<td><strong>SDIFFSTORE</strong>destination key [key …]</td>
<td>O(N)</td>
<td>该命令和SDIFF命令在功能上完全相同，两者之间唯一的差别是SDIFF返回差异的结果成员，而该命令将差异成员存储在destination关联的Set中。如果destination键已经存在，该操作将覆盖它的成员。</td>
<td>返回差异成员的数量。</td>
</tr>
<tr>
<td><strong>SINTER</strong>key [key …]</td>
<td>O(N*M)</td>
<td>时间复杂度中的N表示最小Set中元素的数量，M则表示参数中Sets的数量。该命令将返回参数中所有Keys关联的Sets中成员的交集。因此如果参数中任何一个Key关联的Set为空，或某一Key不存在，那么该命令的结果将为空集。</td>
<td>交集结果成员的集合。</td>
</tr>
<tr>
<td><strong>SINTERSTORE</strong>destination key [key …]</td>
<td>O(N*M)</td>
<td>该命令和SINTER命令在功能上完全相同，两者之间唯一的差别是SINTER返回交集的结果成员，而该命令将交集成员存储在destination关联的Set中。如果destination键已经存在，该操作将覆盖它的成员。</td>
<td>返回交集成员的数量。</td>
</tr>
<tr>
<td><strong>SUNION</strong> key [key …]</td>
<td>O(N)</td>
<td>时间复杂度中的N表示所有Sets中成员的总数量。该命令将返回参数中所有Keys关联的Sets中成员的并集。</td>
<td>并集结果成员的集合。</td>
</tr>
<tr>
<td><strong>SUNIONSTORE</strong> destination key [key …]</td>
<td>O(N)</td>
<td>该命令和SUNION命令在功能上完全相同，两者之间唯一的差别是SUNION返回并集的结果成员，而该命令将并集成员存储在destination关联的Set中。如果destination键已经存在，该操作将覆盖它的成员。</td>
<td>返回并集成员的数量。</td>
</tr>
</tbody></table>
<h4 id="4-3命令实例"><a href="#4-3命令实例" class="headerlink" title="4.3命令实例"></a>4.3命令实例</h4><p>打开redis客户端</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">往集合中添加元素</span></span><br><span class="line">node01:6379> sadd myset a b c</span><br><span class="line">(integer) 3</span><br><span class="line">node01:6379> sadd myset b c d</span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查看元素内容和数量</span></span><br><span class="line">node01:6379> smembers myset</span><br><span class="line">1) "c"</span><br><span class="line">2) "d"</span><br><span class="line">3) "b"</span><br><span class="line">4) "a"</span><br><span class="line">node01:6379> scard myset</span><br><span class="line">(integer) 4</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">判断元素是否在集合中</span></span><br><span class="line">node01:6379> sismember myset a</span><br><span class="line">(integer) 1</span><br><span class="line">node01:6379> sismember myset e</span><br><span class="line">(integer) 0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">随机返回集合中的一个元素</span></span><br><span class="line">node01:6379> srandmember myset</span><br><span class="line">"b"</span><br><span class="line">node01:6379> srandmember myset</span><br><span class="line">"c"</span><br><span class="line">node01:6379> smembers myset</span><br><span class="line">1) "c"</span><br><span class="line">2) "d"</span><br><span class="line">3) "b"</span><br><span class="line">4) "a"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">随机移出元素并返回</span></span><br><span class="line">node01:6379> spop myset</span><br><span class="line">"c"</span><br><span class="line">node01:6379> smembers myset</span><br><span class="line">1) "d"</span><br><span class="line">2) "b"</span><br><span class="line">3) "a"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">移出指定元素</span></span><br><span class="line">node01:6379> srem myset a b c</span><br><span class="line">(integer) 2</span><br><span class="line">node01:6379> smembers myset</span><br><span class="line">1) "d"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">从集合中移动元素到另一个集合</span></span><br><span class="line">node01:6379> smove myset myset2 d</span><br><span class="line">(integer) 1</span><br><span class="line">node01:6379> smembers myset</span><br><span class="line">(empty list or set)</span><br><span class="line">node01:6379> smembers myset2</span><br><span class="line">1) "d"</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">差集</span></span><br><span class="line"><span class="meta">#</span><span class="bash">清空数据库--开发时慎用,仅仅学习测试的时候使用比较方便</span></span><br><span class="line">flushdb</span><br><span class="line"><span class="meta">#</span><span class="bash">准备数据</span></span><br><span class="line">node01:6379> sadd myset1 a b c d</span><br><span class="line">(integer) 4</span><br><span class="line">node01:6379> sadd myset2 c</span><br><span class="line">(integer) 1</span><br><span class="line">node01:6379> sadd myset3 a c e</span><br><span class="line">(integer) 3</span><br><span class="line">node01:6379> sdiff myset1 myset2 myset3</span><br><span class="line">1) "b"</span><br><span class="line">2) "d"</span><br><span class="line">myset1 - myset2 - myset3 = a b c d - c  - a c e = a b d - a c e = b d</span><br><span class="line"><span class="meta">#</span><span class="bash">myset1和myset2相比，a、b和d三个成员是两者之间的差异成员。再用这个结果继续和myset3进行差异比较，b和d是myset3不存在的成员</span></span><br><span class="line">node01:6379> sdiffstore diffset myset1 myset2 myset3</span><br><span class="line">(integer) 2</span><br><span class="line">node01:6379> smembers diffset</span><br><span class="line">1) "b"</span><br><span class="line">2) "d"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">交集</span></span><br><span class="line">myset1 :a b c d </span><br><span class="line">myset2:  c </span><br><span class="line">myset3: a c e</span><br><span class="line">node01:6379> sinter myset1 myset2 myset3</span><br><span class="line">1) "c"</span><br><span class="line">node01:6379> sinterstore interset myset1 myset2 myset3</span><br><span class="line">(integer) 1</span><br><span class="line">node01:6379> smembers interset</span><br><span class="line">1) "c"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">并集</span></span><br><span class="line">myset1 :a b c d </span><br><span class="line">myset2:  c </span><br><span class="line">myset3: a c e</span><br><span class="line">node01:6379> sunion myset1 myset2 myset3</span><br><span class="line">1) "b"</span><br><span class="line">2) "e"</span><br><span class="line">3) "c"</span><br><span class="line">4) "d"</span><br><span class="line">5) "a"</span><br><span class="line">node01:6379> sunionstore unionset myset1 myset2 myset3</span><br><span class="line">(integer) 5</span><br><span class="line">node01:6379> smembers unionset</span><br><span class="line">1) "b"</span><br><span class="line">2) "e"</span><br><span class="line">3) "c"</span><br><span class="line">4) "d"</span><br><span class="line">5) "a"</span><br></pre></td></tr></tbody></table></figure></div>

<h4 id="4-4应用场景"><a href="#4-4应用场景" class="headerlink" title="4.4应用场景"></a>4.4应用场景</h4><ul>
<li><p><strong>去重</strong>,  可以做uv统计, 如将一堆访问日志中的ip存入set中,就可以得到不重复的ip地址集合,这不就是uv</p>
</li>
<li><p><strong>求交集</strong>,可以做求共同好友, 如A用户和马云/马化腾/刘强东是好友, B用户和刘强东是好友, A和B的好友求交集不就是共同好友么,都和东哥是兄弟; 当然也可以求都喜欢购买的商品,都喜欢看的电影,都喜欢听得音乐,再去求差集,然后针对差集做推荐!</p>
</li>
</ul>
<h3 id="5、有序集合-sorted-set"><a href="#5、有序集合-sorted-set" class="headerlink" title="5、有序集合(sorted set)"></a>5、有序集合(sorted set)</h3><h4 id="5-1-类型介绍"><a href="#5-1-类型介绍" class="headerlink" title="5.1 类型介绍"></a>5.1 类型介绍</h4><p>Sorted-Set和Set类型极为相似，它们都是字符串的集合，都不允许重复的成员出现在一个Set中。</p>
<p>  它们之间的主要差别是Sorted-Set中的每一个成员都会有一个分数(score)与之关联，Redis正是通过分数来为集合中的成员进行从小到大的排序。</p>
<p>  需要额外注意的是，尽管Sorted-Sets中的成员必须是唯一的，但是分数(score)却是可以重复的。</p>
<p>  在Sorted-Set中添加、删除或更新一个成员都是非常快速的操作，其时间复杂度为集合中成员数量的对数。由于Sorted-Sets中的成员在集合中的位置是有序的，因此，即便是访问位于集合中部的成员也仍然是非常高效的。事实上，Redis所具有的这一特征在很多其它类型的数据库中是很难实现的，换句话说，在该点上要想达到和Redis同样的高效，在其它数据库中进行建模是非常困难的。</p>
<h4 id="5-2-命令列表"><a href="#5-2-命令列表" class="headerlink" title="5.2 命令列表"></a>5.2 命令列表</h4><table>
<thead>
<tr>
<th><strong>命令原型</strong></th>
<th><strong>时间复杂度</strong></th>
<th><strong>命令描述</strong></th>
<th><strong>返回值</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>ZADD</strong> key score member [score] [member]</td>
<td>O(log(N))</td>
<td>时间复杂度中的N表示Sorted-Sets中成员的数量。添加参数中指定的所有成员及其分数到指定key的Sorted-Set中，在该命令中我们可以指定多组score/member作为参数。如果在添加时参数中的某一成员已经存在，该命令将更新此成员的分数为新值，同时再将该成员基于新值重新排序。如果键不存在，该命令将为该键创建一个新的Sorted-Sets Value，并将score/member对插入其中。如果该键已经存在，但是与其关联的Value不是Sorted-Sets类型，相关的错误信息将被返回。</td>
<td>本次操作实际插入的成员数量。</td>
</tr>
<tr>
<td><strong>ZCARD</strong> key</td>
<td>O(1)</td>
<td>获取与该Key相关联的Sorted-Sets中包含的成员数量。</td>
<td>返回Sorted-Sets中的成员数量，如果该Key不存在，返回0。</td>
</tr>
<tr>
<td><strong>ZCOUNT</strong>key min max</td>
<td>O(log(N)+M)</td>
<td>时间复杂度中的N表示Sorted-Sets中成员的数量，M则表示min和max之间元素的数量。该命令用于获取分数(score)在min和max之间的成员数量。<em>针对min和max参数需要额外说明的是，<strong><em>-inf\</em></strong>和<strong><em>+inf\</em></strong>分别表示Sorted-Sets中分数的最高值和最低值。缺省情况下，min和max表示的范围是闭区间范围，即<strong><em>min <= score <= max\</em></strong>内的成员将被返回。然而我们可以通过在min和max的前面添加”<strong><em>(\</em></strong>“字符来表示开区间，如(min max表示<strong><em>min < score <= max\</em></strong>，而(min (max表示<strong><em>min < score < max\</em></strong>。</em></td>
<td>分数指定范围内成员的数量。</td>
</tr>
<tr>
<td><strong>ZINCRBY</strong>key increment member</td>
<td>O(log(N))</td>
<td>时间复杂度中的N表示Sorted-Sets中成员的数量。该命令将为指定Key中的指定成员增加指定的分数。如果成员不存在，该命令将添加该成员并假设其初始分数为0，此后再将其分数加上increment。如果Key不存，该命令将创建该Key及其关联的Sorted-Sets，并包含参数指定的成员，其分数为increment参数。如果与该Key关联的不是Sorted-Sets类型，相关的错误信息将被返回。</td>
<td>以字符串形式表示的新分数。</td>
</tr>
<tr>
<td><strong>ZRANGE</strong>key start stop [WITHSCORES]</td>
<td>O(log(N)+M)</td>
<td>时间复杂度中的N表示Sorted-Set中成员的数量，M则表示返回的成员数量。该命令返回顺序在参数start和stop指定范围内的成员，这里start和stop参数都是0-based，即0表示第一个成员，-1表示最后一个成员。如果start大于该Sorted-Set中的最大索引值，或start > stop，此时一个空集合将被返回。如果stop大于最大索引值，该命令将返回从start到集合的最后一个成员。<em>如果命令中带有可选参数WITHSCORES选项，该命令在返回的结果中将包含每个成员的分数值，如value1,score1,value2,score2…。</em></td>
<td>返回索引在start和stop之间的成员列表。</td>
</tr>
<tr>
<td><strong>ZRANGEBYSCORE</strong> key min max [WITHSCORES] [LIMIT offset count]</td>
<td>O(log(N)+M)</td>
<td>时间复杂度中的N表示Sorted-Set中成员的数量，M则表示返回的成员数量。该命令将返回分数在min和max之间的所有成员，即满足表达式min <= score <= max的成员，其中返回的成员是按照其分数从低到高的顺序返回，如果成员具有相同的分数，则按成员的字典顺序返回。可选参数LIMIT用于限制返回成员的数量范围。可选参数offset表示从符合条件的第offset个成员开始返回，同时返回count个成员。可选参数WITHSCORES的含义参照ZRANGE中该选项的说明。<em>最后需要说明的是参数中min和max的规则可参照命令ZCOUNT。</em></td>
<td>返回分数在指定范围内的成员列表。</td>
</tr>
<tr>
<td><strong>ZRANK</strong> key member</td>
<td>O(log(N))</td>
<td>时间复杂度中的N表示Sorted-Set中成员的数量。Sorted-Set中的成员都是按照分数从低到高的顺序存储，该命令将返回参数中指定成员的位置值，其中0表示第一个成员，它是Sorted-Set中分数最低的成员。</td>
<td>如果该成员存在，则返回它的位置索引值。否则返回nil。</td>
</tr>
<tr>
<td><strong>ZREM</strong> key member [member …]</td>
<td>O(M log(N))</td>
<td>时间复杂度中N表示Sorted-Set中成员的数量，M则表示被删除的成员数量。该命令将移除参数中指定的成员，其中不存在的成员将被忽略。如果与该Key关联的Value不是Sorted-Set，相应的错误信息将被返回。</td>
<td>实际被删除的成员数量。</td>
</tr>
<tr>
<td><strong>ZREVRANGE</strong> key startstop[WITHSCORES]</td>
<td>O(log(N)+M)</td>
<td>时间复杂度中的N表示Sorted-Set中成员的数量，M则表示返回的成员数量。该命令的功能和ZRANGE基本相同，唯一的差别在于该命令是通过反向排序获取指定位置的成员，即从高到低的顺序。如果成员具有相同的分数，则按降序字典顺序排序。</td>
<td>返回指定的成员列表。</td>
</tr>
<tr>
<td><strong>ZREVRANK</strong>key member</td>
<td>O(log(N))</td>
<td>时间复杂度中的N表示Sorted-Set中成员的数量。该命令的功能和ZRANK基本相同，唯一的差别在于该命令获取的索引是从高到低排序后的位置，同样0表示第一个元素，即分数最高的成员。</td>
<td>如果该成员存在，则返回它的位置索引值。否则返回nil。</td>
</tr>
<tr>
<td><strong>ZSCORE</strong>key member</td>
<td>O(1)</td>
<td>获取指定Key的指定成员的分数。</td>
<td>如果该成员存在，以字符串的形式返回其分数，否则返回nil。</td>
</tr>
<tr>
<td><strong>ZREVRANGEBYSCORE</strong>key max min [WITHSCORES] [LIMIT offset count]</td>
<td>O(log(N)+M)</td>
<td>时间复杂度中的N表示Sorted-Set中成员的数量，M则表示返回的成员数量。该命令除了排序方式是基于从高到低的分数排序之外，其它功能和参数含义均与ZRANGEBYSCORE相同。</td>
<td>返回分数在指定范围内的成员列表。</td>
</tr>
<tr>
<td><strong>ZREMRANGEBYRANK</strong>key start stop</td>
<td>O(log(N)+M)</td>
<td>时间复杂度中的N表示Sorted-Set中成员的数量，M则表示被删除的成员数量。删除索引位置位于start和stop之间的成员，start和stop都是0-based，即0表示分数最低的成员，-1表示最后一个成员，即分数最高的成员。</td>
<td>被删除的成员数量。</td>
</tr>
<tr>
<td><strong>ZREMRANGEBYSCORE</strong>key min max</td>
<td>O(log(N)+M)</td>
<td>时间复杂度中的N表示Sorted-Set中成员的数量，M则表示被删除的成员数量。删除分数在min和max之间的所有成员，即满足表达式min <= score <= max的所有成员。对于min和max参数，可以采用开区间的方式表示，具体规则参照ZCOUNT。</td>
<td>被删除的成员数量。</td>
</tr>
</tbody></table>
<h4 id="5-3-命令实例"><a href="#5-3-命令实例" class="headerlink" title="5.3 命令实例"></a>5.3 命令实例</h4><p>启动redis客户端</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">添加成员</span></span><br><span class="line">node01:6379> zadd myzset 1 one</span><br><span class="line">(integer) 1</span><br><span class="line">node01:6379> zadd myzset 2 two 3 three</span><br><span class="line">(integer) 2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查看集合</span></span><br><span class="line">node01:6379> zrange myzset 0 -1 withscores</span><br><span class="line">1) "one"</span><br><span class="line">2) "1"</span><br><span class="line">3) "two"</span><br><span class="line">4) "2"</span><br><span class="line">5) "three"</span><br><span class="line">6) "3"</span><br><span class="line"> zcard myzset</span><br><span class="line">(integer) 3</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">获取元素的索引值(从0开始)</span></span><br><span class="line">node01:6379> zrank myzset two</span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">获取指定得分范围的元素数量</span></span><br><span class="line">node01:6379> zcount myzset 1 2</span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta">#</span><span class="bash">返回与myzset关联的Sorted-Set中，分数满足表达式1 <= score <= 2的成员的数量</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">删除指定元素</span></span><br><span class="line">node01:6379> zrem myzset one two</span><br><span class="line">(integer) 2</span><br><span class="line">node01:6379> zrange myzset 0 -1 withscores</span><br><span class="line">1) "three"</span><br><span class="line">2) "3"</span><br><span class="line">node01:6379> zcard myzset</span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">操作元素的分数</span></span><br><span class="line">node01:6379> zscore myzset three</span><br><span class="line">"3"</span><br><span class="line">node01:6379> zscore myzset one</span><br><span class="line">(nil)</span><br><span class="line">node01:6379> zincrby myzset 2 one</span><br><span class="line">"2"</span><br><span class="line">node01:6379> zscore myzset one</span><br><span class="line">"2"</span><br><span class="line">node01:6379> zincrby myzset -1 one</span><br><span class="line">"1"</span><br><span class="line">node01:6379> zscore myzset one</span><br><span class="line">"1"</span><br><span class="line">node01:6379> zrange myzset 0 -1 WITHSCORES</span><br><span class="line">1) "one"</span><br><span class="line">2) "1"</span><br><span class="line">3) "three"</span><br><span class="line">4) "3"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">获取指定分数范围的元素</span></span><br><span class="line">node01:6379> del myzset</span><br><span class="line">(integer) 1</span><br><span class="line">node01:6379> zadd myzset 1 one 2 two 3 three 4 four</span><br><span class="line">(integer) 4</span><br><span class="line"><span class="meta">#</span><span class="bash">获取分数满足表达式1 <= score <= 2的成员。</span></span><br><span class="line">node01:6379> zrangebyscore myzset 1 2</span><br><span class="line">1) "one"</span><br><span class="line">2) "two"</span><br><span class="line"><span class="meta">#</span><span class="bash">获取分数满足表达式1 < score <= 2的成员。</span></span><br><span class="line">node01:6379> zrangebyscore myzset (1 2</span><br><span class="line">1) "two"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">删除指定分数范围的元素</span></span><br><span class="line">node01:6379> zrange myzset 0 -1 WITHSCORES</span><br><span class="line">1) "one"</span><br><span class="line">2) "1"</span><br><span class="line">3) "two"</span><br><span class="line">4) "2"</span><br><span class="line">5) "three"</span><br><span class="line">6) "3"</span><br><span class="line">7) "four"</span><br><span class="line">8) "4"</span><br><span class="line"><span class="meta">#</span><span class="bash">删除分数满足表达式1 <= score <= 2的成员</span></span><br><span class="line">node01:6379> zremrangebyscore myzset 1 2</span><br><span class="line">(integer) 2</span><br><span class="line">node01:6379> zrange myzset 0 -1 WITHSCORES</span><br><span class="line">1) "three"</span><br><span class="line">2) "3"</span><br><span class="line">3) "four"</span><br><span class="line">4) "4"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">删除指定索引的元素</span></span><br><span class="line"><span class="meta">#</span><span class="bash">删除位置索引满足表达式0 <= rank <= 1的成员。</span></span><br><span class="line">node01:6379> zremrangebyrank myzset 0 1</span><br><span class="line">(integer) 2</span><br><span class="line">node01:6379> zrange myzset 0 -1 WITHSCORES</span><br><span class="line">(empty list or set)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">逆序--了解</span></span><br><span class="line">del myzset</span><br><span class="line">zadd myzset 1 one 2 two 3 three 4 four</span><br><span class="line"><span class="meta">#</span><span class="bash">以位置索引从高到低的方式获取并返回此区间内的成员。</span></span><br><span class="line">node01:6379> zrevrange myzset 0 -1 WITHSCORES</span><br><span class="line">1) "four"</span><br><span class="line">2) "4"</span><br><span class="line">3) "three"</span><br><span class="line">4) "3"</span><br><span class="line">5) "two"</span><br><span class="line">6) "2"</span><br><span class="line">7) "one"</span><br><span class="line">8) "1"</span><br><span class="line"><span class="meta">#</span><span class="bash">由于是从高到低的排序，所以位置等于0的是four，1是three，并以此类推。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">获取分数满足表达式3 >= score >= 0的成员，并以相反的顺序输出，即从高到底的顺序。</span></span><br><span class="line">node01:6379> zrevrangebyscore myzset 3 0 WITHSCORES</span><br><span class="line">1) "three"</span><br><span class="line">2) "3"</span><br><span class="line">3) "two"</span><br><span class="line">4) "2"</span><br><span class="line">5) "one"</span><br><span class="line">6) "1"</span><br></pre></td></tr></tbody></table></figure></div>

<h4 id="5-4-应用场景"><a href="#5-4-应用场景" class="headerlink" title="5.4 应用场景"></a>5.4 应用场景</h4><ul>
<li>Sorted-Set可以进行按照分值进行排序, 那么就可以做排行榜类似的功能</li>
</ul>
<h3 id="6、其他命令"><a href="#6、其他命令" class="headerlink" title="6、其他命令"></a>6、其他命令</h3><h4 id="6-1-命令列表"><a href="#6-1-命令列表" class="headerlink" title="6.1 命令列表"></a>6.1 命令列表</h4><table>
<thead>
<tr>
<th><strong>命令原型</strong></th>
<th><strong>时间复杂度</strong></th>
<th><strong>命令描述</strong></th>
<th><strong>返回值</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>KEYS</strong> pattern</td>
<td>O(N)</td>
<td>时间复杂度中的N表示数据库中Key的数量。获取所有匹配pattern参数的Keys。需要说明的是，在我们的正常操作中应该尽量避免对该命令的调用，因为对于大型数据库而言，该命令是非常耗时的，对Redis服务器的性能打击也是比较大的。<em>pattern支持glob-style的通配符格式，如*表示任意一个或多个字符，?表示任意字符，[abc]表示方括号中任意一个字母。</em></td>
<td>匹配模式的键列表。</td>
</tr>
<tr>
<td><strong>DEL</strong> key [key …]</td>
<td>O(N)</td>
<td>时间复杂度中的N表示删除的Key数量。从数据库删除中参数中指定的keys，如果指定键不存在，则直接忽略。还需要另行指出的是，如果指定的Key关联的数据类型不是String类型，而是List、Set、Hashes和Sorted Set等容器类型，该命令删除每个键的时间复杂度为O(M)，其中M表示容器中元素的数量。而对于String类型的Key，其时间复杂度为O(1)。</td>
<td>实际被删除的Key数量。</td>
</tr>
<tr>
<td><strong>EXISTS</strong> key</td>
<td>O(1)</td>
<td>判断指定键是否存在。</td>
<td>1表示存在，0表示不存在。</td>
</tr>
<tr>
<td><strong>MOVE</strong> key db</td>
<td>O(1)</td>
<td>将当前数据库中指定的键Key移动到参数中指定的数据库中。如果该Key在目标数据库中已经存在，或者在当前数据库中并不存在，该命令将不做任何操作并返回0。</td>
<td>移动成功返回1，否则0。</td>
</tr>
<tr>
<td><strong>RENAME</strong> key newkey</td>
<td>O(1)</td>
<td>为指定指定的键重新命名，如果参数中的两个Keys的命令相同，或者是源Key不存在，该命令都会返回相关的错误信息。如果newKey已经存在，则直接覆盖。</td>
<td></td>
</tr>
<tr>
<td><strong>RENAMENX</strong> key newkey</td>
<td>O(1)</td>
<td>如果新值不存在，则将参数中的原值修改为新值。其它条件和RENAME一致。</td>
<td>1表示修改成功，否则0。</td>
</tr>
<tr>
<td><strong>PERSIST</strong> key</td>
<td>O(1)</td>
<td>如果Key存在过期时间，该命令会将其过期时间消除，使该Key不再有超时，而是可以持久化存储。</td>
<td>1表示Key的过期时间被移出，0表示该Key不存在或没有过期时间。</td>
</tr>
<tr>
<td><strong>EXPIRE</strong> key seconds</td>
<td>O(1)</td>
<td>该命令为参数中指定的Key设定超时的秒数，在超过该时间后，Key被自动的删除。如果该Key在超时之前被修改，与该键关联的超时将被移除。</td>
<td>1表示超时被设置，0则表示Key不存在，或不能被设置。</td>
</tr>
<tr>
<td><strong>EXPIREAT</strong> key timestamp</td>
<td>O(1)</td>
<td>该命令的逻辑功能和EXPIRE完全相同，唯一的差别是该命令指定的超时时间是绝对时间，而不是相对时间。该时间参数是Unix timestamp格式的，即从1970年1月1日开始所流经的秒数。</td>
<td>1表示超时被设置，0则表示Key不存在，或不能被设置。</td>
</tr>
<tr>
<td><strong>TTL</strong> key</td>
<td>O(1)</td>
<td>获取该键所剩的超时描述。</td>
<td>返回所剩描述，如果该键不存在或没有超时设置，则返回-1。</td>
</tr>
<tr>
<td><strong>RANDOMKEY</strong></td>
<td>O(1)</td>
<td>从当前打开的数据库中随机的返回一个Key。</td>
<td>返回的随机键，如果该数据库是空的则返回nil。</td>
</tr>
<tr>
<td><strong>TYPE</strong> key</td>
<td>O(1)</td>
<td>获取与参数中指定键关联值的类型，该命令将以字符串的格式返回。</td>
<td>返回的字符串为string、list、set、hash和zset，如果key不存在返回none。</td>
</tr>
<tr>
<td><strong>SORT</strong> key [BY pattern] [LIMIT offset count] [GET pattern [GET pattern …]] [ASC|DESC] [ALPHA] [STORE destination]</td>
<td>O(N+M*log(M))</td>
<td>这个命令相对来说是比较复杂的，因此我们这里只是给出最基本的用法，有兴趣的网友可以去参考redis的官方文档。</td>
<td>返回排序后的原始列表。</td>
</tr>
</tbody></table>
<h4 id="6-2-命令实例"><a href="#6-2-命令实例" class="headerlink" title="6.2 命令实例"></a>6.2 命令实例</h4><p>打开redis客户端</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">返回满足的所有键 ,可以模糊匹配 比如 keys  abc* 代表 abc 开头的 key</span></span><br><span class="line">keys  *</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查看数据库的key数量</span></span><br><span class="line">dbsize</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">重命名key</span></span><br><span class="line">rename key key2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">是否存在指定的key，存在返回1，不存在返回0</span></span><br><span class="line">exists key </span><br><span class="line">node01:6379> exists key </span><br><span class="line">(integer) 0</span><br><span class="line">node01:6379> exists myset1</span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">返回key的类型</span></span><br><span class="line">type mykey</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">随机返回一个key</span></span><br><span class="line">randomkey</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">删除某个key</span></span><br><span class="line">del key</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查看key的过期剩余时间</span></span><br><span class="line"><span class="meta">#</span><span class="bash">当key不存在时，返回 -2;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">存在但没有设置剩余生存时间时，返回 -1,</span></span><br><span class="line"><span class="meta">#</span><span class="bash">否则，以秒为单位，返回 key 的剩余生存时间。</span></span><br><span class="line">ttl key</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">设置某个key的过期时间 时间为秒</span></span><br><span class="line">expire key second</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">取消过期时间</span></span><br><span class="line">persist key</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">选择数据库</span></span><br><span class="line"><span class="meta">#</span><span class="bash">数据库为0-15（一共16个数据库,默认为0号库）</span></span><br><span class="line"><span class="meta">#</span><span class="bash">设计成多个数据库实际上是为了数据库安全和备份</span></span><br><span class="line"><span class="meta">#</span><span class="bash">建议不同的应用系统要使用不同的redis实例/进程而不是使用同一个<span class="comment">#redis实例下的不同数据库</span></span></span><br><span class="line">select</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">将当前数据中的key转移到其他数据库</span></span><br><span class="line">move key dbindex </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查看数据库信息</span></span><br><span class="line">info</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">获得服务配置</span></span><br><span class="line">config get *</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">清空当前数据库,开发慎用</span></span><br><span class="line">flushdb</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">清空所有数据库,开发慎用</span></span><br><span class="line">flushall</span><br></pre></td></tr></tbody></table></figure></div>

<h4 id="6-3-应用场景"><a href="#6-3-应用场景" class="headerlink" title="6.3 应用场景"></a>6.3 应用场景</h4><ul>
<li>日常运维</li>
</ul>
<h2 id="四、Redis的API"><a href="#四、Redis的API" class="headerlink" title="四、Redis的API"></a>四、Redis的API</h2><p>  redis有很多客户端可供选择，日常使用会选择java客户端的Jedis,因为其非常小而且功能完整，api也和redis的命令保持一致。</p>
<h3 id="1、环境搭建"><a href="#1、环境搭建" class="headerlink" title="1、环境搭建"></a>1、环境搭建</h3><p>  创建一个maven工程，在pom.xml文件中以下依赖</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>redis.clients<span class="tag"><!--<span class="name"-->groupId</span>></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>jedis<span class="tag"><!--<span class="name"-->artifactId</span>></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>2.9.0<span class="tag"><!--<span class="name"-->version</span>></span><br><span class="line">    <span class="tag"><!--<span class="name"-->dependency</span>></span><br><span class="line">    <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>junit<span class="tag"><!--<span class="name"-->groupId</span>></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>junit<span class="tag"><!--<span class="name"-->artifactId</span>></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>4.12<span class="tag"><!--<span class="name"-->version</span>></span><br><span class="line">    <span class="tag"><!--<span class="name"-->dependency</span>></span><br><span class="line"><span class="tag"><!--<span class="name"-->dependencies</span>></span><br></pre></td></tr></tbody></table></figure></div>

<h3 id="2、使用"><a href="#2、使用" class="headerlink" title="2、使用"></a>2、使用</h3><h4 id="2-1-入门案例"><a href="#2-1-入门案例" class="headerlink" title="2.1 入门案例"></a>2.1 入门案例</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisTest</span> </span>{</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testJedisHello</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="comment">//1.创建jedis连接对象</span></span><br><span class="line">        Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">"node01"</span>, <span class="number">6379</span>);</span><br><span class="line">        <span class="comment">//2.测试是否可以连接redis服务器</span></span><br><span class="line">        String pong = jedis.ping();</span><br><span class="line">        System.out.println(pong);</span><br><span class="line">        <span class="comment">//3.关闭连接</span></span><br><span class="line">        jedis.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>

<h4 id="2-2-Jedis的连接池"><a href="#2-2-Jedis的连接池" class="headerlink" title="2.2 Jedis的连接池"></a>2.2 Jedis的连接池</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*  使用jedis连接池，构建一个工具类，这样提高程序效率</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisUtil</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> JedisPoolConfig jedisPoolConfig;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> JedisPool jedisPool;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> {</span><br><span class="line">        <span class="comment">//1.创建Jedis连接池参数对象</span></span><br><span class="line">        jedisPoolConfig = <span class="keyword">new</span> JedisPoolConfig();</span><br><span class="line">        <span class="comment">//2.设置连接池参数,三个确保拿到和归还的jedis对象是否可用</span></span><br><span class="line">        jedisPoolConfig.setMaxIdle(<span class="number">10</span>);<span class="comment">//设置最大连接</span></span><br><span class="line">        jedisPoolConfig.setMaxTotal(<span class="number">100</span>);<span class="comment">//设置最大空闲连接数</span></span><br><span class="line">        jedisPoolConfig.setMinIdle(<span class="number">5</span>);<span class="comment">//设置最小空闲连接数</span></span><br><span class="line">        jedisPoolConfig.setMaxWaitMillis(<span class="number">2000</span>);<span class="comment">//最大等待时间</span></span><br><span class="line">        jedisPoolConfig.setTestOnBorrow(<span class="keyword">true</span>);<span class="comment">//setTestOnBorrow：获得一个jedis实例的时候是否检查连接可用性</span></span><br><span class="line">        jedisPoolConfig.setTestOnCreate(<span class="keyword">true</span>); <span class="comment">//setTestOnCreate: 创建一个jedis实时时时候是否检查连接可用性,如果为true,则得到的jedis实例均是可用的</span></span><br><span class="line">        jedisPoolConfig.setTestOnReturn(<span class="keyword">true</span>); <span class="comment">//setTestOnReturn：归还一个jedis实例给pool时，是否检查连接可用性</span></span><br><span class="line">        <span class="comment">//3.根据连接词参数对象创建连接池对象</span></span><br><span class="line">        jedisPool = <span class="keyword">new</span> JedisPool(jedisPoolConfig,<span class="string">"node-03"</span>,<span class="number">6379</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">JedisUtil</span><span class="params">()</span></span>{}</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取jedis对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Jedis <span class="title">getJedis</span><span class="params">()</span></span>{</span><br><span class="line">        Jedis jedis = jedisPool.getResource();</span><br><span class="line">        <span class="keyword">return</span> jedis;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>

<h4 id="2-3-测试"><a href="#2-3-测试" class="headerlink" title="2.3 测试"></a>2.3 测试</h4><ul>
<li><p>字符串(String)</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisTest</span> </span>{</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSring</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="comment">//1.使用工具类获取Jedis</span></span><br><span class="line">        Jedis jedis = JedisUtil.getJedis();</span><br><span class="line">        <span class="comment">//2.操作String类型的命令</span></span><br><span class="line">        <span class="comment">//2.1创建</span></span><br><span class="line">        <span class="comment">//String set = jedis.set("k1", "v2");</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.2 获取key的数据</span></span><br><span class="line">        <span class="comment">/*String s = jedis.get("k1");</span></span><br><span class="line"><span class="comment">        System.out.println("k1 --> " + s);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.3 为一个key设置value并返回之前值</span></span><br><span class="line">        <span class="comment">/*String set = jedis.getSet("k1", "v3");</span></span><br><span class="line"><span class="comment">        System.out.println("k1之前的值-->"+set);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.4 添加多条数据</span></span><br><span class="line">        <span class="comment">/*String mset = jedis.mset("k2","v2","k3","v3","k4","v4");</span></span><br><span class="line"><span class="comment">        System.out.println(mset);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.5 一次性获取多条数据</span></span><br><span class="line">        <span class="comment">/*List<string> mget = jedis.mget("k1", "k2", "k3", "k4");</string></span></span><br><span class="line"><span class="comment">        for (String s : mget) {</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.6 添加一条数据并设置过期时间（单位: S）</span></span><br><span class="line">        <span class="comment">/*String setex = jedis.setex("k4", 10, "v4");</span></span><br><span class="line"><span class="comment">        System.out.println(setex);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.7 添加一条数据(只有key 不存在的情况, 才可以设置, 否则不允许添加数据)</span></span><br><span class="line">        <span class="comment">/*Long setnx = jedis.setnx("k5", "v5");</span></span><br><span class="line"><span class="comment">        System.out.println(setnx);</span></span><br><span class="line"><span class="comment">        Long setnx1 = jedis.setnx("k5", "k55");</span></span><br><span class="line"><span class="comment">        System.out.println(setnx1);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.8 根据key获取value的长度</span></span><br><span class="line">        <span class="comment">/*Long k1 = jedis.strlen("k1");</span></span><br><span class="line"><span class="comment">        System.out.println(k1);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.9 拼接字符串</span></span><br><span class="line">        <span class="comment">/*Long append = jedis.append("k1", "hello");</span></span><br><span class="line"><span class="comment">        System.out.println(append);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.10 自加一</span></span><br><span class="line">        <span class="comment">/*String k6 = jedis.set("k6", "1");</span></span><br><span class="line"><span class="comment">        System.out.println(k6);</span></span><br><span class="line"><span class="comment">        Long incr = jedis.incr("k6");</span></span><br><span class="line"><span class="comment">        System.out.println(incr);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.11 自减一</span></span><br><span class="line">        <span class="comment">/*Long k6 = jedis.decr("k6");</span></span><br><span class="line"><span class="comment">        System.out.println(k6);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.12 加法</span></span><br><span class="line">        <span class="comment">/*Long k6 = jedis.incrBy("k6", 2);</span></span><br><span class="line"><span class="comment">        System.out.println(k6);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.13 减法</span></span><br><span class="line">        Long k6 = jedis.decrBy(<span class="string">"k6"</span>, <span class="number">1</span>);</span><br><span class="line">        System.out.println(k6);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>
</li>
<li><p>哈希(hash)</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisTest</span> </span>{</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testHash</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="comment">//1.使用工具类获取Jedis</span></span><br><span class="line">        Jedis jedis = JedisUtil.getJedis();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//2.操作Hash类型的命令</span></span><br><span class="line">        <span class="comment">//2.1创建</span></span><br><span class="line">       <span class="comment">/* Long hset = jedis.hset("user001", "username", "jack");</span></span><br><span class="line"><span class="comment">        System.out.println(hset);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.2 获取值</span></span><br><span class="line">        <span class="comment">/*String hget = jedis.hget("user001", "username");</span></span><br><span class="line"><span class="comment">        System.out.println(hget);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.3 获取键的字段数量</span></span><br><span class="line">        <span class="comment">/*Long user001 = jedis.hlen("user001");</span></span><br><span class="line"><span class="comment">        System.out.println(user001);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.4 判断键中是否存在指定字段</span></span><br><span class="line">        <span class="comment">/*Boolean hexists = jedis.hexists("user001", "username");</span></span><br><span class="line"><span class="comment">        System.out.println(hexists);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.5 删除键中指定字段</span></span><br><span class="line">        <span class="comment">/*Long hdel = jedis.hdel("user001", "username");</span></span><br><span class="line"><span class="comment">        System.out.println(hdel);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.6 一次性设置多个字段</span></span><br><span class="line">        <span class="comment">/*Map<string,string> map = new HashMap<>();</string,string></span></span><br><span class="line"><span class="comment">        map.put("username", "jack");</span></span><br><span class="line"><span class="comment">        map.put("nickname", "jackma");</span></span><br><span class="line"><span class="comment">        map.put("age"," 10");</span></span><br><span class="line"><span class="comment">        String user001 = jedis.hmset("user001", map);</span></span><br><span class="line"><span class="comment">        System.out.println(user001);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.7 获取键的多个字段</span></span><br><span class="line">        <span class="comment">/*List<string> hmget = jedis.hmget("user001", "username", "age");</string></span></span><br><span class="line"><span class="comment">        for (String s : hmget) {</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.8 返回键的所有字段及其值</span></span><br><span class="line">        <span class="comment">/*Map<string, string> map = jedis.hgetAll("user001");</string,></span></span><br><span class="line"><span class="comment">        Set<map.entry<string, string>> entries = map.entrySet();</map.entry<string,></span></span><br><span class="line"><span class="comment">        for (Map.Entry<string, string> entry : entries) {</string,></span></span><br><span class="line"><span class="comment">            System.out.println(entries);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.9 仅获取键中所有字段的名</span></span><br><span class="line">        <span class="comment">/*Set<string> user001 = jedis.hkeys("user001");</string></span></span><br><span class="line"><span class="comment">        for (String s : user001) {</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.10 仅获取键中所有字段的值</span></span><br><span class="line">        <span class="comment">/*List<string> user001 = jedis.hvals("user001");</string></span></span><br><span class="line"><span class="comment">        for (String s : user001) {</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line">        </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>
</li>
<li><p>列表(list)</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisTest</span> </span>{</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testList</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="comment">//1.使用工具类获取Jedis</span></span><br><span class="line">        Jedis jedis = JedisUtil.getJedis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.操作List类型的命令</span></span><br><span class="line">        <span class="comment">//2.1 从左边插入数据</span></span><br><span class="line">       <span class="comment">/* Long lpush = jedis.lpush("mylist1", "a", "b", "c");</span></span><br><span class="line"><span class="comment">        System.out.println(lpush);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.2 从右边插入数据</span></span><br><span class="line">        <span class="comment">/*Long rpush = jedis.rpush("mylist1", "a", "b", "c");</span></span><br><span class="line"><span class="comment">        System.out.println(rpush);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.3 查看list的长度</span></span><br><span class="line">        <span class="comment">/*Long mylist1 = jedis.llen("mylist1");</span></span><br><span class="line"><span class="comment">        System.out.println(mylist1);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.4 查看list中的元素</span></span><br><span class="line">        <span class="comment">/*List<string> mylist1 = jedis.lrange("mylist1", 0, 5);</string></span></span><br><span class="line"><span class="comment">        for (String s : mylist1) {</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        }</span></span><br><span class="line"><span class="comment">        //查看全部元素</span></span><br><span class="line"><span class="comment">        List<string> mylist2 = jedis.lrange("mylist1", 0, -1);*/</string></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.5 获取指定索引的元素</span></span><br><span class="line">        <span class="comment">/*String mylist1 = jedis.lindex("mylist1", 1);</span></span><br><span class="line"><span class="comment">        System.out.println(mylist1);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.6 从list左边弹出一个元素（类似栈，弹出后，元素会被删除）</span></span><br><span class="line">       <span class="comment">/* String mylist1 = jedis.lpop("mylist1");</span></span><br><span class="line"><span class="comment">        System.out.println(mylist1);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.7 从list右边弹出一个元素（类似栈，弹出后，元素会被删除）</span></span><br><span class="line">        <span class="comment">/*String mylist1 = jedis.rpop("mylist1");</span></span><br><span class="line"><span class="comment">        System.out.println(mylist1);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.8 从list1中右侧弹出一个元素, 将这个元素从左侧添加到list2</span></span><br><span class="line">        <span class="comment">/*String rpoplpush = jedis.rpoplpush("mylist1", "mylist2");</span></span><br><span class="line"><span class="comment">        System.out.println(rpoplpush);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.9 从list中删除指定的元素</span></span><br><span class="line">        <span class="comment">/*Long lrem = jedis.lrem("mylist1", 2, "a");</span></span><br><span class="line"><span class="comment">        System.out.println(lrem);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.10 设置指定位置的元素为新值</span></span><br><span class="line">        <span class="comment">/*String lset = jedis.lset("mylist1", 0, "a");</span></span><br><span class="line"><span class="comment">        System.out.println(lset);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.11 设置保留指定索引区间的元素，其余元素删除</span></span><br><span class="line">        <span class="comment">/*String mylist2 = jedis.ltrim("mylist2", 0, 2);</span></span><br><span class="line"><span class="comment">        System.out.println(mylist2);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.12 往指定元素前/后插入元素（被插入元素的值，而不是下标）</span></span><br><span class="line">        <span class="comment">/*Long mylist2 = jedis.linsert("mylist2", BinaryClient.LIST_POSITION.AFTER, "3", "10");</span></span><br><span class="line"><span class="comment">        System.out.println(mylist2);*/</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>
</li>
<li><p>集合（Set）</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisTest</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSet</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="comment">//1.使用工具类获取Jedis</span></span><br><span class="line">        Jedis jedis = JedisUtil.getJedis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.操作Set类型的命令</span></span><br><span class="line">        <span class="comment">//2.1 往集合中添加元素</span></span><br><span class="line">        <span class="comment">/*Long sadd = jedis.sadd("myset", "a", "b", "c");</span></span><br><span class="line"><span class="comment">        System.out.println(sadd);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.2 查看元素内容</span></span><br><span class="line">        <span class="comment">/*Set<string> myset = jedis.smembers("myset");</string></span></span><br><span class="line"><span class="comment">        for (String s : myset) {</span></span><br><span class="line"><span class="comment">            System.out.println(myset);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.3 查看元素数量</span></span><br><span class="line">        <span class="comment">/*Long myset = jedis.scard("myset");</span></span><br><span class="line"><span class="comment">        System.out.println(myset);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.4 判断元素是否在集合中</span></span><br><span class="line">        <span class="comment">/*Boolean sismember = jedis.sismember("myset", "a");</span></span><br><span class="line"><span class="comment">        System.out.println(sismember);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.5 随机返回集合中的一个元素</span></span><br><span class="line">        <span class="comment">/*String myset = jedis.srandmember("myset");</span></span><br><span class="line"><span class="comment">        System.out.println(myset);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.6 随机移出元素并返回</span></span><br><span class="line">        <span class="comment">/*String myset = jedis.spop("myset");</span></span><br><span class="line"><span class="comment">        System.out.println(myset);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.7 移出指定元素</span></span><br><span class="line">        <span class="comment">/*Long srem = jedis.srem("myset", "a");</span></span><br><span class="line"><span class="comment">        System.out.println(srem);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.8 从集合中移动元素到另一个集合,(原集合元素就会被删除)</span></span><br><span class="line">        <span class="comment">/*Long smove = jedis.smove("myset", "myset1", "b");</span></span><br><span class="line"><span class="comment">        System.out.println(smove);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//准备三个集合</span></span><br><span class="line">        <span class="comment">/*jedis.sadd("assemble1","a","b","c");</span></span><br><span class="line"><span class="comment">        jedis.sadd("assemble2","c");</span></span><br><span class="line"><span class="comment">        jedis.sadd("assemble3","a","e","d");*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.9 差集</span></span><br><span class="line">        <span class="comment">//差集(assemble1 - assemble2 - assemble3)</span></span><br><span class="line">        <span class="comment">/*Set<string> sdiff = jedis.sdiff("assemble1", "assemble2", "assemble3");</string></span></span><br><span class="line"><span class="comment">        for (String s : sdiff) {</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.10 差集，并将结果放入目标集合中(assemble1 - assemble2 - assemble3)</span></span><br><span class="line">        <span class="comment">/*Long sdiffstore = jedis.sdiffstore("diffset", "assemble1", "assemble2", "assemble3");</span></span><br><span class="line"><span class="comment">        System.out.println(sdiffstore);</span></span><br><span class="line"><span class="comment">        Set<string> diffset = jedis.smembers("diffset");</string></span></span><br><span class="line"><span class="comment">        for (String s : diffset) {</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.11 交集(assemble1 ∩ assemble2 )</span></span><br><span class="line">        <span class="comment">/*Set<string> sinter = jedis.sinter("assemble1", "assemble2");</string></span></span><br><span class="line"><span class="comment">        for (String s : sinter) {</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.12 交集，并将结果放入目标集合中(assemble1 ∩ assemble2 )</span></span><br><span class="line">        <span class="comment">/*Long sinterstore = jedis.sinterstore("interset", "assemble1", "assemble2");</span></span><br><span class="line"><span class="comment">        System.out.println(sinterstore);</span></span><br><span class="line"><span class="comment">        Set<string> interset = jedis.smembers("interset");</string></span></span><br><span class="line"><span class="comment">        for (String s : interset) {</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.13 并集(assemble1 ∪ assemble2 ∪ assemble3)</span></span><br><span class="line">        <span class="comment">/*Set<string> sunion = jedis.sunion("assemble1", "assemble2", "assemble3");</string></span></span><br><span class="line"><span class="comment">        for (String s : sunion) {</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.14 并集,并将结果放入目标集合中（assemble1 ∪ assemble2 ∪ assemble3）</span></span><br><span class="line">        <span class="comment">/*Long sunionstore = jedis.sunionstore("unionset", "assemble1", "assemble2");</span></span><br><span class="line"><span class="comment">        System.out.println(sunionstore);</span></span><br><span class="line"><span class="comment">        Set<string> unionset = jedis.smembers("unionset");</string></span></span><br><span class="line"><span class="comment">        for (String s : unionset) {</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>
</li>
<li><p>有序集合(sorted set)</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisTest</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSortedSet</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="comment">//1.使用工具类获取Jedis</span></span><br><span class="line">        Jedis jedis = JedisUtil.getJedis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.操作SortedSet类型的命令</span></span><br><span class="line">        <span class="comment">//2.1 往集合中添加元素</span></span><br><span class="line">        <span class="comment">/*Long zadd1 = jedis.zadd("mysortedset1", 1, "one2");</span></span><br><span class="line"><span class="comment">        Long zadd2 = jedis.zadd("mysortedset1", 2, "two");</span></span><br><span class="line"><span class="comment">        Long zadd3 = jedis.zadd("mysortedset1", 3, "three");</span></span><br><span class="line"><span class="comment">        Long zadd4 = jedis.zadd("mysortedset1", 2, "one1");</span></span><br><span class="line"><span class="comment">        System.out.println(zadd1);</span></span><br><span class="line"><span class="comment">        System.out.println(zadd2);</span></span><br><span class="line"><span class="comment">        System.out.println(zadd3);</span></span><br><span class="line"><span class="comment">        System.out.println(zadd4);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.2 查看元素内容</span></span><br><span class="line">       <span class="comment">/* Set<string> mysortedset1 = jedis.zrange("mysortedset1", 0, -1);</string></span></span><br><span class="line"><span class="comment">        System.out.println(mysortedset1);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.3 获取元素的索引值(从0开始)</span></span><br><span class="line">        <span class="comment">/*Long zrank = jedis.zrank("mysortedset1", "one1");</span></span><br><span class="line"><span class="comment">        System.out.println(zrank);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.4 获取指定得分范围的元素数量（两边闭区间，即 min <= x max <=max）</span></span><br><span class="line">        <span class="comment">/*Long mysortedset1 = jedis.zcount("mysortedset1", 1, 2);</span></span><br><span class="line"><span class="comment">        System.out.println(mysortedset1);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.5 随机返回集合中的一个元素</span></span><br><span class="line">        <span class="comment">/*String myset = jedis.srandmember("myset");</span></span><br><span class="line"><span class="comment">        System.out.println(myset);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.6 删除指定元素</span></span><br><span class="line">        <span class="comment">/*Long zrem = jedis.zrem("mysortedset1", "one1");</span></span><br><span class="line"><span class="comment">        System.out.println(zrem);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.7 获取字段的分数</span></span><br><span class="line">        <span class="comment">/*Double zscore = jedis.zscore("mysortedset1", "one2");</span></span><br><span class="line"><span class="comment">        System.out.println(zscore);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.8 给指定字段增加分数</span></span><br><span class="line">       <span class="comment">/* Double zincrby = jedis.zincrby("mysortedset1", 2, "one2");</span></span><br><span class="line"><span class="comment">        System.out.println(zincrby);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.9 获取指定分数范围的元素</span></span><br><span class="line">        <span class="comment">/*Set<string> mysortedset1 = jedis.zrangeByScore("mysortedset1", 1, 3);</string></span></span><br><span class="line"><span class="comment">        for (String s : mysortedset1) {</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.10 删除指定分数区域的元素（两边闭区间，即 min <= x max <=max）</span></span><br><span class="line">        <span class="comment">/*Long mysortedset1 = jedis.zremrangeByScore("mysortedset1", 1, 2);</span></span><br><span class="line"><span class="comment">        System.out.println(mysortedset1);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.11 删除指定索引区域的元素（两边闭区间，即 startIndex <= x max <=endIndex）</span></span><br><span class="line">        <span class="comment">/*Long mysortedset11 = jedis.zremrangeByRank("mysortedset1", 0, 1);</span></span><br><span class="line"><span class="comment">        System.out.println(mysortedset11);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.12 逆序,指定索引区域进行逆序</span></span><br><span class="line">        <span class="comment">/*Set<string> mysortedset1 = jedis.zrevrange("mysortedset1", 0, -1);</string></span></span><br><span class="line"><span class="comment">        for (String s : mysortedset1) {</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.13 逆序,指定分数区域进行逆序</span></span><br><span class="line">        <span class="comment">/*Set<string> mysortedset1 = jedis.zrevrangeByScore("mysortedset1", 3, 1);</string></span></span><br><span class="line"><span class="comment">        for (String s : mysortedset1) {</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>
</li>
<li><p>其他命令</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisTest</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testOther</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="comment">//1.使用工具类获取Jedis</span></span><br><span class="line">        Jedis jedis = JedisUtil.getJedis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.操作其他的命令</span></span><br><span class="line">        <span class="comment">//2.1 返回满足的所有键 ,可以模糊匹配</span></span><br><span class="line">        <span class="comment">/*Set<string> keys = jedis.keys("*");</string></span></span><br><span class="line"><span class="comment">        for (String key : keys) {</span></span><br><span class="line"><span class="comment">            System.out.println(key);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.2 查看数据库的key数量</span></span><br><span class="line">        <span class="comment">/*Long aLong = jedis.dbSize();</span></span><br><span class="line"><span class="comment">        System.out.println(aLong);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.3 重命名key</span></span><br><span class="line">        <span class="comment">/*String rename = jedis.rename("mysortedset1", "sortedset");</span></span><br><span class="line"><span class="comment">        System.out.println(rename);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.4  是否存在指定的key</span></span><br><span class="line">        <span class="comment">/*Boolean mysortedset1 = jedis.exists("mysortedset1");</span></span><br><span class="line"><span class="comment">        System.out.println(mysortedset1);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.5 返回key的类型</span></span><br><span class="line">        <span class="comment">/*String sortedset = jedis.type("sortedset");</span></span><br><span class="line"><span class="comment">        System.out.println(sortedset);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.6 随机返回一个key</span></span><br><span class="line">        <span class="comment">/*Long sortedset = jedis.del("sortedset");</span></span><br><span class="line"><span class="comment">        System.out.println(sortedset);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.7 查看key的过期剩余时间</span></span><br><span class="line">        <span class="comment">//key不存在，返回-2</span></span><br><span class="line">        <span class="comment">//key存在但没有设置生存时间，返回-1</span></span><br><span class="line">        <span class="comment">//key存在也设置了生存时间，返回剩余的生存时间</span></span><br><span class="line">        <span class="comment">/*Long sortedset = jedis.ttl("sortedset");</span></span><br><span class="line"><span class="comment">        System.out.println(sortedset);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.8 设置某个key的过期时间 时间为秒</span></span><br><span class="line">        <span class="comment">/*Long key = jedis.expire("sortedset", 20);</span></span><br><span class="line"><span class="comment">        System.out.println(sortedset);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.9 取消过期时间</span></span><br><span class="line">        <span class="comment">/*Long sortedset = jedis.persist("sortedset");</span></span><br><span class="line"><span class="comment">        System.out.println(sortedset);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.10 选择数据库</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            1.数据库为0-15（一共16个数据库,默认为0号库）</span></span><br><span class="line"><span class="comment">            2.设计成多个数据库实际上是为了数据库安全和备份</span></span><br><span class="line"><span class="comment">            3.建议不同的应用系统要使用不同的redis实例/进程而不是使用同一个</span></span><br><span class="line"><span class="comment">            4.redis实例下的不同数据库</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">/*String select = jedis.select(2);</span></span><br><span class="line"><span class="comment">        System.out.println(select);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.11 查看数据库信息</span></span><br><span class="line">        <span class="comment">/*String info = jedis.info();</span></span><br><span class="line"><span class="comment">        System.out.println(info);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.12 获得服务配置</span></span><br><span class="line">        <span class="comment">/*List<string> list = jedis.configGet("*");</string></span></span><br><span class="line"><span class="comment">        for (String s : list) {</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.13 清空当前数据库,开发慎用</span></span><br><span class="line">        <span class="comment">/*String s = jedis.flushDB();</span></span><br><span class="line"><span class="comment">        System.out.println(s);*/</span></span><br><span class="line">    </span><br><span class="line">        <span class="comment">//2.14 清空所有数据库，开发慎用</span></span><br><span class="line">        <span class="comment">/*String s = jedis.flushAll();</span></span><br><span class="line"><span class="comment">        System.out.println(s);*/</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>

</li>
</ul>
</body></html></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">cll4ac</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/08/04/redis/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/">http://yoursite.com/2020/08/04/redis/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> Donate<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/08/04/redis/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Previous Post</div><div class="prev_info"><span>redis/Redis学习笔记（二）</span></div></a></div><div class="next-post pull_right"><a href="/2020/03/21/Web%E7%AC%94%E8%AE%B0_css%E5%9F%BA%E7%A1%80/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>Web笔记_css基础</span></div></a></div></nav></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By cll4ac</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion" target="_self">繁</a></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/fireworks.js"></script><script id="ribbon" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script id="ribbon_piao" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/piao.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"live2d-widget-model-izumi"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>